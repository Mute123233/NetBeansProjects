/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package com.mycompany.atelie.forms;

import com.formdev.flatlaf.FlatLightLaf;
import javax.swing.*;
import java.awt.*;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLEncoder;
import java.util.ArrayList;
import org.json.JSONArray;
import org.json.JSONObject;
import java.util.HashMap;
import java.util.Map;
import java.util.stream.Collectors;
import java.util.List;

/**
 *
 * @author 8270@stud.pgt.su
 */
public class dashbord1 extends javax.swing.JFrame {

    /**
     * Creates new form dashbord1
     */
    public dashbord1() {
        FlatLightLaf.setup();

        initComponents();
        ImageIcon icon = new ImageIcon("src/main/resources/img/icon.png");
        setIconImage(icon.getImage());
        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        this.pack();
        this.setLocationRelativeTo(null);
     // Если нужно фиксировать размер
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jTabbedPane1 = new javax.swing.JTabbedPane();
        jPanel1 = new javax.swing.JPanel();
        jButton1 = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        jPanel7 = new javax.swing.JPanel();
        jButton10 = new javax.swing.JButton();
        jComboBox1 = new javax.swing.JComboBox<>();
        jTextField1 = new javax.swing.JTextField();
        jPanel9 = new javax.swing.JPanel();
        jLabel8 = new javax.swing.JLabel();
        jPanel2 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        jButton2 = new javax.swing.JButton();
        jFormattedTextField5 = new javax.swing.JFormattedTextField();
        jFormattedTextField6 = new javax.swing.JFormattedTextField();
        jLabel9 = new javax.swing.JLabel();
        jPanel15 = new javax.swing.JPanel();
        jButton9 = new javax.swing.JButton();
        jLabel11 = new javax.swing.JLabel();
        jPanel3 = new javax.swing.JPanel();
        jLabel3 = new javax.swing.JLabel();
        jButton3 = new javax.swing.JButton();
        jPanel6 = new javax.swing.JPanel();
        jButton8 = new javax.swing.JButton();
        jTextField2 = new javax.swing.JTextField();
        jLabel10 = new javax.swing.JLabel();
        jComboBox2 = new javax.swing.JComboBox<>();
        jPanel4 = new javax.swing.JPanel();
        jButton4 = new javax.swing.JButton();
        jLabel4 = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        jFormattedTextField4 = new javax.swing.JFormattedTextField();
        jFormattedTextField3 = new javax.swing.JFormattedTextField();
        jPanel16 = new javax.swing.JPanel();
        jButton6 = new javax.swing.JButton();
        jLabel12 = new javax.swing.JLabel();
        jPanel5 = new javax.swing.JPanel();
        jLabel5 = new javax.swing.JLabel();
        jPanel8 = new javax.swing.JPanel();
        jButton7 = new javax.swing.JButton();
        jButton5 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Дашборд");

        jTabbedPane1.setBackground(new java.awt.Color(163, 27, 24));
        jTabbedPane1.setForeground(new java.awt.Color(255, 255, 255));
        jTabbedPane1.setFont(new java.awt.Font("Dialog", 1, 12)); // NOI18N

        jPanel1.setBackground(new java.awt.Color(255, 255, 255));

        jButton1.setFont(new java.awt.Font("Dialog", 1, 13)); // NOI18N
        jButton1.setForeground(new java.awt.Color(163, 27, 24));
        jButton1.setText("ОК");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jLabel1.setFont(new java.awt.Font("Dialog", 1, 24)); // NOI18N
        jLabel1.setForeground(new java.awt.Color(163, 27, 24));
        jLabel1.setText("Просмотр продаж за текущий месяц");

        jPanel7.setBackground(new java.awt.Color(255, 255, 255));
        jPanel7.setForeground(new java.awt.Color(163, 27, 24));

        javax.swing.GroupLayout jPanel7Layout = new javax.swing.GroupLayout(jPanel7);
        jPanel7.setLayout(jPanel7Layout);
        jPanel7Layout.setHorizontalGroup(
            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 836, Short.MAX_VALUE)
        );
        jPanel7Layout.setVerticalGroup(
            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 203, Short.MAX_VALUE)
        );

        jButton10.setFont(new java.awt.Font("Dialog", 1, 13)); // NOI18N
        jButton10.setForeground(new java.awt.Color(163, 27, 24));
        jButton10.setText("Назад");

        jComboBox1.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Январь", "Февраль", "Март", "Апрель", "Май", "Июнь", "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь" }));
        jComboBox1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jComboBox1ActionPerformed(evt);
            }
        });

        jTextField1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField1ActionPerformed(evt);
            }
        });

        jPanel9.setBackground(new java.awt.Color(255, 255, 255));
        jPanel9.setForeground(new java.awt.Color(163, 27, 24));

        javax.swing.GroupLayout jPanel9Layout = new javax.swing.GroupLayout(jPanel9);
        jPanel9.setLayout(jPanel9Layout);
        jPanel9Layout.setHorizontalGroup(
            jPanel9Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 0, Short.MAX_VALUE)
        );
        jPanel9Layout.setVerticalGroup(
            jPanel9Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 225, Short.MAX_VALUE)
        );

        jLabel8.setFont(new java.awt.Font("PT Astra Fact", 1, 13)); // NOI18N
        jLabel8.setForeground(new java.awt.Color(102, 0, 0));
        jLabel8.setText("Год:");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jButton10)
                .addContainerGap())
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(25, 25, 25)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel8)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, 76, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jButton1))
                    .addComponent(jLabel1))
                .addGap(0, 434, Short.MAX_VALUE))
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jPanel7, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jPanel9, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jButton10)
                .addGap(1, 1, 1)
                .addComponent(jLabel1)
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton1)
                    .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel8))
                .addGap(33, 33, 33)
                .addComponent(jPanel7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(33, 33, 33)
                .addComponent(jPanel9, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(160, Short.MAX_VALUE))
        );

        jTabbedPane1.addTab("Продажи за текущий месяц", jPanel1);

        jPanel2.setBackground(new java.awt.Color(255, 255, 255));

        jLabel2.setFont(new java.awt.Font("Dialog", 1, 24)); // NOI18N
        jLabel2.setForeground(new java.awt.Color(163, 27, 24));
        jLabel2.setText("Просмотр продаж за указанный период");

        jButton2.setFont(new java.awt.Font("Dialog", 1, 13)); // NOI18N
        jButton2.setForeground(new java.awt.Color(163, 27, 24));
        jButton2.setText("ОК");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });

        jFormattedTextField5.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 102, 102)));
        jFormattedTextField5.setForeground(new java.awt.Color(163, 27, 24));
        try {
            jFormattedTextField5.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.MaskFormatter("####-##-##")));
        } catch (java.text.ParseException ex) {
            ex.printStackTrace();
        }
        jFormattedTextField5.setFont(new java.awt.Font("Dialog", 1, 13)); // NOI18N

        jFormattedTextField6.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 102, 102)));
        jFormattedTextField6.setForeground(new java.awt.Color(163, 27, 24));
        try {
            jFormattedTextField6.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.MaskFormatter("####-##-##")));
        } catch (java.text.ParseException ex) {
            ex.printStackTrace();
        }
        jFormattedTextField6.setFont(new java.awt.Font("Dialog", 1, 13)); // NOI18N
        jFormattedTextField6.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jFormattedTextField6ActionPerformed(evt);
            }
        });

        jLabel9.setFont(new java.awt.Font("Dialog", 1, 24)); // NOI18N
        jLabel9.setForeground(new java.awt.Color(163, 27, 24));
        jLabel9.setText("-");

        jPanel15.setBackground(new java.awt.Color(255, 255, 255));
        jPanel15.setForeground(new java.awt.Color(163, 27, 24));

        javax.swing.GroupLayout jPanel15Layout = new javax.swing.GroupLayout(jPanel15);
        jPanel15.setLayout(jPanel15Layout);
        jPanel15Layout.setHorizontalGroup(
            jPanel15Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 849, Short.MAX_VALUE)
        );
        jPanel15Layout.setVerticalGroup(
            jPanel15Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 490, Short.MAX_VALUE)
        );

        jButton9.setFont(new java.awt.Font("Dialog", 1, 13)); // NOI18N
        jButton9.setForeground(new java.awt.Color(163, 27, 24));
        jButton9.setText("Назад");

        jLabel11.setFont(new java.awt.Font("Dialog", 0, 14)); // NOI18N
        jLabel11.setForeground(new java.awt.Color(153, 153, 153));
        jLabel11.setText("Введите период");

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGap(25, 25, 25)
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel2Layout.createSequentialGroup()
                                .addComponent(jFormattedTextField6, javax.swing.GroupLayout.PREFERRED_SIZE, 124, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jLabel9)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jFormattedTextField5, javax.swing.GroupLayout.PREFERRED_SIZE, 125, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(18, 18, 18)
                                .addComponent(jButton2))
                            .addComponent(jLabel2)
                            .addComponent(jLabel11))
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jButton9)))
                .addContainerGap())
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGap(14, 14, 14)
                .addComponent(jPanel15, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(60, Short.MAX_VALUE))
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jButton9)
                .addGap(1, 1, 1)
                .addComponent(jLabel2)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jLabel11)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel9)
                    .addComponent(jFormattedTextField6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jFormattedTextField5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButton2))
                .addGap(27, 27, 27)
                .addComponent(jPanel15, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(114, Short.MAX_VALUE))
        );

        jTabbedPane1.addTab("     Продажи за указанный период       ", jPanel2);

        jPanel3.setBackground(new java.awt.Color(255, 255, 255));

        jLabel3.setFont(new java.awt.Font("Dialog", 1, 24)); // NOI18N
        jLabel3.setForeground(new java.awt.Color(163, 27, 24));
        jLabel3.setText("Просмотр количества заказов ателье за текущий месяц");

        jButton3.setFont(new java.awt.Font("Dialog", 1, 13)); // NOI18N
        jButton3.setForeground(new java.awt.Color(163, 27, 24));
        jButton3.setText("ОК");
        jButton3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton3ActionPerformed(evt);
            }
        });

        jPanel6.setBackground(new java.awt.Color(255, 255, 255));
        jPanel6.setForeground(new java.awt.Color(163, 27, 24));

        javax.swing.GroupLayout jPanel6Layout = new javax.swing.GroupLayout(jPanel6);
        jPanel6.setLayout(jPanel6Layout);
        jPanel6Layout.setHorizontalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 891, Short.MAX_VALUE)
        );
        jPanel6Layout.setVerticalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 395, Short.MAX_VALUE)
        );

        jButton8.setFont(new java.awt.Font("Dialog", 1, 13)); // NOI18N
        jButton8.setForeground(new java.awt.Color(163, 27, 24));
        jButton8.setText("Назад");

        jTextField2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField2ActionPerformed(evt);
            }
        });

        jLabel10.setFont(new java.awt.Font("PT Astra Fact", 1, 13)); // NOI18N
        jLabel10.setForeground(new java.awt.Color(102, 0, 0));
        jLabel10.setText("Год:");

        jComboBox2.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Январь", "Февраль", "Март", "Апрель", "Май", "Июнь", "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь" }));
        jComboBox2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jComboBox2ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jButton8))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGap(26, 26, 26)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addComponent(jLabel10)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, 76, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jComboBox2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jButton3))
                            .addComponent(jLabel3)
                            .addComponent(jPanel6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(0, 0, Short.MAX_VALUE)))
                .addContainerGap())
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jButton8)
                .addGap(1, 1, 1)
                .addComponent(jLabel3)
                .addGap(18, 18, 18)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jComboBox2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jLabel10))
                    .addComponent(jButton3))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 128, Short.MAX_VALUE)
                .addComponent(jPanel6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(132, 132, 132))
        );

        jTabbedPane1.addTab("        Заказы за месяц      ", jPanel3);

        jPanel4.setBackground(new java.awt.Color(255, 255, 255));

        jButton4.setFont(new java.awt.Font("Dialog", 1, 13)); // NOI18N
        jButton4.setForeground(new java.awt.Color(163, 27, 24));
        jButton4.setText("ОК");
        jButton4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton4ActionPerformed(evt);
            }
        });

        jLabel4.setFont(new java.awt.Font("Dialog", 1, 24)); // NOI18N
        jLabel4.setForeground(new java.awt.Color(163, 27, 24));
        jLabel4.setText("Просмотр количества заказов ателье за указанный");

        jLabel7.setFont(new java.awt.Font("Dialog", 1, 24)); // NOI18N
        jLabel7.setForeground(new java.awt.Color(163, 27, 24));
        jLabel7.setText("временный период");

        jLabel6.setFont(new java.awt.Font("Dialog", 1, 24)); // NOI18N
        jLabel6.setForeground(new java.awt.Color(163, 27, 24));
        jLabel6.setText("-");

        jFormattedTextField4.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 102, 102)));
        jFormattedTextField4.setForeground(new java.awt.Color(163, 27, 24));
        try {
            jFormattedTextField4.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.MaskFormatter("####-##-##")));
        } catch (java.text.ParseException ex) {
            ex.printStackTrace();
        }
        jFormattedTextField4.setFont(new java.awt.Font("Dialog", 1, 13)); // NOI18N

        jFormattedTextField3.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 102, 102)));
        jFormattedTextField3.setForeground(new java.awt.Color(163, 27, 24));
        try {
            jFormattedTextField3.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.MaskFormatter("####-##-##")));
        } catch (java.text.ParseException ex) {
            ex.printStackTrace();
        }
        jFormattedTextField3.setFont(new java.awt.Font("Dialog", 1, 13)); // NOI18N

        jPanel16.setBackground(new java.awt.Color(255, 255, 255));
        jPanel16.setForeground(new java.awt.Color(163, 27, 24));

        javax.swing.GroupLayout jPanel16Layout = new javax.swing.GroupLayout(jPanel16);
        jPanel16.setLayout(jPanel16Layout);
        jPanel16Layout.setHorizontalGroup(
            jPanel16Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 893, Short.MAX_VALUE)
        );
        jPanel16Layout.setVerticalGroup(
            jPanel16Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 485, Short.MAX_VALUE)
        );

        jButton6.setFont(new java.awt.Font("Dialog", 1, 13)); // NOI18N
        jButton6.setForeground(new java.awt.Color(163, 27, 24));
        jButton6.setText("Назад");

        jLabel12.setFont(new java.awt.Font("Dialog", 0, 14)); // NOI18N
        jLabel12.setForeground(new java.awt.Color(153, 153, 153));
        jLabel12.setText("Введите период");

        javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
        jPanel4.setLayout(jPanel4Layout);
        jPanel4Layout.setHorizontalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addGap(21, 21, 21)
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel4Layout.createSequentialGroup()
                        .addComponent(jLabel4)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jButton6))
                    .addGroup(jPanel4Layout.createSequentialGroup()
                        .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel12)
                            .addComponent(jLabel7)
                            .addGroup(jPanel4Layout.createSequentialGroup()
                                .addComponent(jFormattedTextField3, javax.swing.GroupLayout.PREFERRED_SIZE, 125, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jLabel6)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jFormattedTextField4, javax.swing.GroupLayout.PREFERRED_SIZE, 125, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(18, 18, 18)
                                .addComponent(jButton4))
                            .addComponent(jPanel16, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(0, 3, Short.MAX_VALUE)))
                .addContainerGap())
        );
        jPanel4Layout.setVerticalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel4Layout.createSequentialGroup()
                        .addGap(15, 15, 15)
                        .addComponent(jLabel4))
                    .addGroup(jPanel4Layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jButton6)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel7)
                .addGap(7, 7, 7)
                .addComponent(jLabel12)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel6)
                    .addComponent(jFormattedTextField3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jFormattedTextField4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButton4))
                .addGap(35, 35, 35)
                .addComponent(jPanel16, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jTabbedPane1.addTab("       Заказы за указанный период      ", jPanel4);

        jPanel5.setBackground(new java.awt.Color(255, 255, 255));

        jLabel5.setFont(new java.awt.Font("Dialog", 1, 24)); // NOI18N
        jLabel5.setForeground(new java.awt.Color(163, 27, 24));
        jLabel5.setText("Просмотр всех заказов ателье");

        jPanel8.setBackground(new java.awt.Color(255, 255, 255));
        jPanel8.setForeground(new java.awt.Color(163, 27, 24));

        javax.swing.GroupLayout jPanel8Layout = new javax.swing.GroupLayout(jPanel8);
        jPanel8.setLayout(jPanel8Layout);
        jPanel8Layout.setHorizontalGroup(
            jPanel8Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 901, Short.MAX_VALUE)
        );
        jPanel8Layout.setVerticalGroup(
            jPanel8Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 351, Short.MAX_VALUE)
        );

        jButton7.setFont(new java.awt.Font("Dialog", 1, 13)); // NOI18N
        jButton7.setForeground(new java.awt.Color(163, 27, 24));
        jButton7.setText("Назад");

        jButton5.setFont(new java.awt.Font("Dialog", 1, 13)); // NOI18N
        jButton5.setForeground(new java.awt.Color(163, 27, 24));
        jButton5.setText("ОК");
        jButton5.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton5ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel5Layout = new javax.swing.GroupLayout(jPanel5);
        jPanel5.setLayout(jPanel5Layout);
        jPanel5Layout.setHorizontalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addGap(27, 27, 27)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanel5Layout.createSequentialGroup()
                        .addComponent(jButton5)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(jPanel5Layout.createSequentialGroup()
                        .addComponent(jLabel5)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jButton7)))
                .addContainerGap())
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addGap(16, 16, 16)
                .addComponent(jPanel8, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        jPanel5Layout.setVerticalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel5Layout.createSequentialGroup()
                        .addComponent(jButton7)
                        .addGap(49, 49, 49))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel5Layout.createSequentialGroup()
                        .addComponent(jLabel5)
                        .addGap(18, 18, 18)))
                .addComponent(jButton5)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 104, Short.MAX_VALUE)
                .addComponent(jPanel8, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(199, 199, 199))
        );

        jTabbedPane1.addTab("           Все заказы          ", jPanel5);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jTabbedPane1))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jTabbedPane1)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void loadOrdersForPeriod() {
        try {
            // Получаем даты из полей ввода
            String startDate = jFormattedTextField3.getText().trim();
            String endDate = jFormattedTextField4.getText().trim();

            // Проверяем, что даты введены
            if (startDate.isEmpty() || endDate.isEmpty()) {
                JOptionPane.showMessageDialog(this, "Пожалуйста, введите обе даты", "Ошибка", JOptionPane.ERROR_MESSAGE);
                return;
            }

            // Проверяем формат дат (должны быть ####-##-##)
            if (!startDate.matches("\\d{4}-\\d{2}-\\d{2}") || !endDate.matches("\\d{4}-\\d{2}-\\d{2}")) {
                JOptionPane.showMessageDialog(this, "Неверный формат даты. Используйте: ГГГГ-ММ-ДД", "Ошибка", JOptionPane.ERROR_MESSAGE);
                return;
            }

            // Формируем URL
            String urlString = "http://localhost:8080/atelie/KolichestvoZakazovZaPeriod"
                    + "?startDate=" + URLEncoder.encode(startDate, "UTF-8")
                    + "&endDate=" + URLEncoder.encode(endDate, "UTF-8");

            System.out.println("=== ЗАПРОС ЗАКАЗОВ ЗА ПЕРИОД ===");
            System.out.println("URL: " + urlString);

            // Создаем соединение
            URL url = new URL(urlString);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setRequestMethod("POST");
            connection.setRequestProperty("Accept", "application/json");
            connection.setConnectTimeout(10000);
            connection.setReadTimeout(10000);

            // Получаем ответ
            int responseCode = connection.getResponseCode();
            System.out.println("Код ответа: " + responseCode);

            if (responseCode == HttpURLConnection.HTTP_OK) {
                BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream(), "UTF-8"));
                String inputLine;
                StringBuilder response = new StringBuilder();

                while ((inputLine = in.readLine()) != null) {
                    response.append(inputLine);
                }
                in.close();

                System.out.println("Полный ответ: " + response.toString());

                // Парсим JSON ответ
                JSONObject jsonObject = new JSONObject(response.toString());

                // Обрабатываем данные для графика
                processPeriodOrdersData(jsonObject, startDate, endDate);

            } else {
                System.err.println("HTTP ошибка: " + responseCode);
                JOptionPane.showMessageDialog(this, "Ошибка при получении данных с сервера: " + responseCode,
                        "Ошибка", JOptionPane.ERROR_MESSAGE);
            }

        } catch (Exception e) {
            System.err.println("Общая ошибка:");
            e.printStackTrace();
            JOptionPane.showMessageDialog(this, "Ошибка при подключении к серверу: " + e.getMessage(),
                    "Ошибка", JOptionPane.ERROR_MESSAGE);
        }
    }

    private void processPeriodOrdersData(JSONObject data, String startDate, String endDate) {
        try {
            // Получаем данные по разным типам заказов
            JSONArray zakazyNaPoshiv = data.getJSONArray("zakazyNaPoshiv");
            JSONArray zakazyTkani = data.getJSONArray("zakazyTkani");
            JSONArray zakazyFurnitura = data.getJSONArray("zakazyFurnitura");

            System.out.println("=== ОБРАБОТКА ДАННЫХ ЗАКАЗОВ ЗА ПЕРИОД ===");
            System.out.println("Заказов на пошив: " + zakazyNaPoshiv.length());
            System.out.println("Записей тканей: " + zakazyTkani.length());
            System.out.println("Записей фурнитуры: " + zakazyFurnitura.length());

            // Проверяем, есть ли данные
            if ((zakazyNaPoshiv.length() == 0 || (zakazyNaPoshiv.length() == 1 && zakazyNaPoshiv.getString(0).contains("не найдены")))
                    && (zakazyTkani.length() == 0 || (zakazyTkani.length() == 1 && zakazyTkani.getString(0).contains("не найдены")))
                    && (zakazyFurnitura.length() == 0 || (zakazyFurnitura.length() == 1 && zakazyFurnitura.getString(0).contains("не найдены")))) {
                showNoPeriodOrdersMessage(startDate, endDate);
                return;
            }

            // Обрабатываем заказы на пошив
            Map<String, Integer> statusStats = new HashMap<>();
            Map<String, Integer> izdelieStats = new HashMap<>();
            Map<String, Integer> shveyaStats = new HashMap<>();

            for (int i = 0; i < zakazyNaPoshiv.length(); i++) {
                String item = zakazyNaPoshiv.getString(i);
                if (!item.contains("не найдены") && !item.contains("Ошибка")) {
                    parseOrderItem(item, statusStats, izdelieStats, shveyaStats);
                }
            }

            // Обрабатываем заказы тканей
            Map<String, Integer> tkaniStats = new HashMap<>();
            for (int i = 0; i < zakazyTkani.length(); i++) {
                String item = zakazyTkani.getString(i);
                if (!item.contains("не найдены") && !item.contains("Ошибка")) {
                    parseTkaniItem(item, tkaniStats);
                }
            }

            // Обрабатываем заказы фурнитуры
            Map<String, Integer> furnituraStats = new HashMap<>();
            for (int i = 0; i < zakazyFurnitura.length(); i++) {
                String item = zakazyFurnitura.getString(i);
                if (!item.contains("не найдены") && !item.contains("Ошибка")) {
                    parseFurnituraItem(item, furnituraStats);
                }
            }

            // Создаем и отображаем график
            createAndShowPeriodOrdersChart(statusStats, izdelieStats, shveyaStats,
                    tkaniStats, furnituraStats, startDate, endDate);

        } catch (Exception e) {
            System.err.println("Ошибка обработки данных заказов за период:");
            e.printStackTrace();
            showNoPeriodOrdersMessage(startDate, endDate);
        }
    }

    private void parseTkaniItem(String item, Map<String, Integer> tkaniStats) {
        try {
            if (item.contains("Ткань: ")) {
                int start = item.indexOf("Ткань: ") + 7;
                int end = item.indexOf(",", start);
                if (end == -1) {
                    end = item.length();
                }
                String tkan = item.substring(start, end).trim();
                tkaniStats.put(tkan, tkaniStats.getOrDefault(tkan, 0) + 1);
            }
        } catch (Exception e) {
            System.err.println("Ошибка парсинга ткани: " + item);
        }
    }

    private void parseFurnituraItem(String item, Map<String, Integer> furnituraStats) {
        try {
            if (item.contains("Фурнитура: ")) {
                int start = item.indexOf("Фурнитура: ") + 11;
                int end = item.indexOf(",", start);
                if (end == -1) {
                    end = item.length();
                }
                String furnitura = item.substring(start, end).trim();
                furnituraStats.put(furnitura, furnituraStats.getOrDefault(furnitura, 0) + 1);
            }
        } catch (Exception e) {
            System.err.println("Ошибка парсинга фурнитуры: " + item);
        }
    }

    private void createAndShowPeriodOrdersChart(Map<String, Integer> statusStats,
            Map<String, Integer> izdelieStats,
            Map<String, Integer> shveyaStats,
            Map<String, Integer> tkaniStats,
            Map<String, Integer> furnituraStats,
            String startDate, String endDate) {
        // Очищаем панель перед отрисовкой нового графика
        jPanel16.removeAll();
        jPanel16.setLayout(new BorderLayout());

        // Создаем панель с вкладками для разных графиков
        JTabbedPane chartsTabbedPane = new JTabbedPane();

        // График по статусам заказов на пошив
        if (!statusStats.isEmpty()) {
            JPanel statusPanel = new PeriodOrdersStatusChartPanel(statusStats, startDate, endDate);
            chartsTabbedPane.addTab("Статусы заказов", statusPanel);
        }

        // График по изделиям
        if (!izdelieStats.isEmpty()) {
            JPanel izdeliePanel = new PeriodOrdersIzdelieChartPanel(izdelieStats, startDate, endDate);
            chartsTabbedPane.addTab("Изделия", izdeliePanel);
        }

        // График по швеям
        if (!shveyaStats.isEmpty()) {
            JPanel shveyaPanel = new PeriodOrdersShveyaChartPanel(shveyaStats, startDate, endDate);
            chartsTabbedPane.addTab("Швеи", shveyaPanel);
        }

        // График по тканям
        if (!tkaniStats.isEmpty()) {
            JPanel tkaniPanel = new PeriodOrdersTkaniChartPanel(tkaniStats, startDate, endDate);
            chartsTabbedPane.addTab("Ткани", tkaniPanel);
        }

        // График по фурнитуре
        if (!furnituraStats.isEmpty()) {
            JPanel furnituraPanel = new PeriodOrdersFurnituraChartPanel(furnituraStats, startDate, endDate);
            chartsTabbedPane.addTab("Фурнитура", furnituraPanel);
        }

        jPanel16.add(chartsTabbedPane, BorderLayout.CENTER);

        // Обновляем интерфейс
        jPanel16.revalidate();
        jPanel16.repaint();
    }

    private void showNoPeriodOrdersMessage(String startDate, String endDate) {
        jPanel16.removeAll();
        jPanel16.setLayout(new BorderLayout());

        JLabel noDataLabel = new JLabel("Заказы за период с " + startDate + " по " + endDate + " не найдены", JLabel.CENTER);
        noDataLabel.setFont(new Font("Dialog", Font.BOLD, 16));
        noDataLabel.setForeground(Color.RED);

        jPanel16.add(noDataLabel, BorderLayout.CENTER);
        jPanel16.revalidate();
        jPanel16.repaint();
    }

// Классы для графиков за период (аналогичные существующим, но адаптированные для периода)
    class PeriodOrdersStatusChartPanel extends JPanel {

        private Map<String, Integer> statusStats;
        private String startDate;
        private String endDate;

        public PeriodOrdersStatusChartPanel(Map<String, Integer> statusStats, String startDate, String endDate) {
            this.statusStats = statusStats;
            this.startDate = startDate;
            this.endDate = endDate;
            setBackground(Color.WHITE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            int width = getWidth();
            int height = getHeight();

            // Заголовок
            g2d.setFont(new Font("Dialog", Font.BOLD, 18));
            g2d.setColor(new Color(163, 27, 24));
            String title = "Статусы заказов за период с " + startDate + " по " + endDate;
            g2d.drawString(title, width / 2 - g2d.getFontMetrics().stringWidth(title) / 2, 30);

            if (statusStats.isEmpty()) {
                g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
                g2d.setColor(Color.RED);
                g2d.drawString("Нет данных для отображения", width / 2 - 80, height / 2);
                return;
            }

            // Общая информация
            int totalOrders = statusStats.values().stream().mapToInt(Integer::intValue).sum();
            g2d.setFont(new Font("Dialog", Font.PLAIN, 12));
            g2d.setColor(Color.BLACK);
            g2d.drawString("Всего заказов на пошив: " + totalOrders, 20, 60);

            // Параметры для круговой диаграммы
            int centerX = width / 2;
            int centerY = height / 2 + 50;
            int radius = Math.min(width, height) / 3;

            // Цвета для секторов
            Color[] colors = {
                new Color(163, 27, 24), new Color(30, 144, 255),
                new Color(50, 205, 50), new Color(255, 165, 0),
                new Color(148, 0, 211), new Color(255, 69, 0)
            };

            // Рассчитываем углы
            int total = statusStats.values().stream().mapToInt(Integer::intValue).sum();
            double startAngle = 0;
            int colorIndex = 0;

            // Рисуем секторы
            for (Map.Entry<String, Integer> entry : statusStats.entrySet()) {
                String status = entry.getKey();
                int count = entry.getValue();
                double angle = 360 * (count / (double) total);

                // Рисуем сектор
                g2d.setColor(colors[colorIndex % colors.length]);
                g2d.fillArc(centerX - radius, centerY - radius, radius * 2, radius * 2,
                        (int) startAngle, (int) angle);

                // Рамка сектора
                g2d.setColor(Color.BLACK);
                g2d.drawArc(centerX - radius, centerY - radius, radius * 2, radius * 2,
                        (int) startAngle, (int) angle);

                // Легенда
                int legendY = 100 + colorIndex * 25;
                g2d.setColor(colors[colorIndex % colors.length]);
                g2d.fillRect(20, legendY, 15, 15);
                g2d.setColor(Color.BLACK);
                g2d.drawRect(20, legendY, 15, 15);

                String legendText = String.format("%s: %d (%.1f%%)", status, count, (count * 100.0 / total));
                g2d.drawString(legendText, 45, legendY + 12);

                startAngle += angle;
                colorIndex++;
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(700, 500);
        }
    }

    class PeriodOrdersIzdelieChartPanel extends JPanel {

        private Map<String, Integer> izdelieStats;
        private String startDate;
        private String endDate;

        public PeriodOrdersIzdelieChartPanel(Map<String, Integer> izdelieStats, String startDate, String endDate) {
            this.izdelieStats = izdelieStats;
            this.startDate = startDate;
            this.endDate = endDate;
            setBackground(Color.WHITE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            int width = getWidth();
            int height = getHeight();

            // Заголовок
            g2d.setFont(new Font("Dialog", Font.BOLD, 18));
            g2d.setColor(new Color(0, 102, 102));
            String title = "Изделия за период с " + startDate + " по " + endDate;
            g2d.drawString(title, width / 2 - g2d.getFontMetrics().stringWidth(title) / 2, 30);

            if (izdelieStats.isEmpty()) {
                g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
                g2d.setColor(Color.RED);
                g2d.drawString("Нет данных для отображения", width / 2 - 80, height / 2);
                return;
            }

            // Находим максимальное значение для масштабирования
            int maxCount = izdelieStats.values().stream().max(Integer::compare).orElse(1);

            // Параметры для столбцов
            int barWidth = Math.max(40, (width - 100) / izdelieStats.size() - 10);
            int startX = 80;
            int baseY = height - 100;
            int chartHeight = height - 200;

            // Рисуем столбцы
            int x = startX;
            int colorIndex = 0;
            Color[] colors = {
                new Color(0, 102, 102), new Color(0, 128, 128),
                new Color(0, 150, 150), new Color(0, 180, 180)
            };

            for (Map.Entry<String, Integer> entry : izdelieStats.entrySet()) {
                String izdelie = entry.getKey();
                int count = entry.getValue();

                // Высота столбца
                int barHeight = (int) ((count / (double) maxCount) * chartHeight);

                // Цвет столбца
                g2d.setColor(colors[colorIndex % colors.length]);
                g2d.fillRect(x, baseY - barHeight, barWidth, barHeight);

                // Рамка столбца
                g2d.setColor(Color.BLACK);
                g2d.drawRect(x, baseY - barHeight, barWidth, barHeight);

                // Название изделия
                g2d.setFont(new Font("Dialog", Font.PLAIN, 10));
                String displayName = izdelie.length() > 12 ? izdelie.substring(0, 12) + "..." : izdelie;
                int textWidth = g2d.getFontMetrics().stringWidth(displayName);
                g2d.drawString(displayName, x + barWidth / 2 - textWidth / 2, baseY + 15);

                // Количество
                g2d.setFont(new Font("Dialog", Font.BOLD, 10));
                String countText = String.valueOf(count);
                int countWidth = g2d.getFontMetrics().stringWidth(countText);
                g2d.drawString(countText, x + barWidth / 2 - countWidth / 2, baseY - barHeight - 5);

                x += barWidth + 15;
                colorIndex++;
            }

            // Ось Y
            g2d.setColor(Color.BLACK);
            g2d.drawLine(60, baseY, 60, 80);
            g2d.drawLine(60, baseY, width - 20, baseY);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(700, 500);
        }
    }

    class PeriodOrdersShveyaChartPanel extends JPanel {

        private Map<String, Integer> shveyaStats;
        private String startDate;
        private String endDate;

        public PeriodOrdersShveyaChartPanel(Map<String, Integer> shveyaStats, String startDate, String endDate) {
            this.shveyaStats = shveyaStats;
            this.startDate = startDate;
            this.endDate = endDate;
            setBackground(Color.WHITE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            int width = getWidth();
            int height = getHeight();

            // Заголовок
            g2d.setFont(new Font("Dialog", Font.BOLD, 18));
            g2d.setColor(new Color(148, 0, 211));
            String title = "Распределение по швеям за период с " + startDate + " по " + endDate;
            g2d.drawString(title, width / 2 - g2d.getFontMetrics().stringWidth(title) / 2, 30);

            if (shveyaStats.isEmpty()) {
                g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
                g2d.setColor(Color.RED);
                g2d.drawString("Нет данных для отображения", width / 2 - 80, height / 2);
                return;
            }

            // Находим максимальное значение для масштабирования
            int maxCount = shveyaStats.values().stream().max(Integer::compare).orElse(1);

            // Параметры для столбцов
            int barWidth = Math.max(40, (width - 100) / shveyaStats.size() - 10);
            int startX = 80;
            int baseY = height - 100;
            int chartHeight = height - 200;

            // Рисуем столбцы
            int x = startX;
            int colorIndex = 0;
            Color[] colors = {
                new Color(148, 0, 211), new Color(160, 30, 220),
                new Color(170, 60, 230), new Color(180, 90, 240)
            };

            for (Map.Entry<String, Integer> entry : shveyaStats.entrySet()) {
                String shveya = entry.getKey();
                int count = entry.getValue();

                // Высота столбца
                int barHeight = (int) ((count / (double) maxCount) * chartHeight);

                // Цвет столбца
                g2d.setColor(colors[colorIndex % colors.length]);
                g2d.fillRect(x, baseY - barHeight, barWidth, barHeight);

                // Рамка столбца
                g2d.setColor(Color.BLACK);
                g2d.drawRect(x, baseY - barHeight, barWidth, barHeight);

                // Имя швеи
                g2d.setFont(new Font("Dialog", Font.PLAIN, 10));
                String displayName = shveya.length() > 12 ? shveya.substring(0, 12) + "..." : shveya;
                int textWidth = g2d.getFontMetrics().stringWidth(displayName);
                g2d.drawString(displayName, x + barWidth / 2 - textWidth / 2, baseY + 15);

                // Количество заказов
                g2d.setFont(new Font("Dialog", Font.BOLD, 10));
                String countText = String.valueOf(count);
                int countWidth = g2d.getFontMetrics().stringWidth(countText);
                g2d.drawString(countText, x + barWidth / 2 - countWidth / 2, baseY - barHeight - 5);

                x += barWidth + 15;
                colorIndex++;
            }

            // Ось Y
            g2d.setColor(Color.BLACK);
            g2d.drawLine(60, baseY, 60, 80);
            g2d.drawLine(60, baseY, width - 20, baseY);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(700, 500);
        }
    }

    class PeriodOrdersTkaniChartPanel extends JPanel {

        private Map<String, Integer> tkaniStats;
        private String startDate;
        private String endDate;

        public PeriodOrdersTkaniChartPanel(Map<String, Integer> tkaniStats, String startDate, String endDate) {
            this.tkaniStats = tkaniStats;
            this.startDate = startDate;
            this.endDate = endDate;
            setBackground(Color.WHITE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            int width = getWidth();
            int height = getHeight();

            // Заголовок
            g2d.setFont(new Font("Dialog", Font.BOLD, 18));
            g2d.setColor(new Color(30, 144, 255));
            String title = "Ткани в заказах за период с " + startDate + " по " + endDate;
            g2d.drawString(title, width / 2 - g2d.getFontMetrics().stringWidth(title) / 2, 30);

            if (tkaniStats.isEmpty()) {
                g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
                g2d.setColor(Color.RED);
                g2d.drawString("Нет данных для отображения", width / 2 - 80, height / 2);
                return;
            }

            // Находим максимальное значение для масштабирования
            int maxCount = tkaniStats.values().stream().max(Integer::compare).orElse(1);

            // Параметры для столбцов
            int barWidth = Math.max(40, (width - 100) / tkaniStats.size() - 10);
            int startX = 80;
            int baseY = height - 100;
            int chartHeight = height - 200;

            // Рисуем столбцы
            int x = startX;
            int colorIndex = 0;
            Color[] colors = {
                new Color(30, 144, 255), new Color(65, 105, 225),
                new Color(100, 149, 237), new Color(135, 206, 250)
            };

            for (Map.Entry<String, Integer> entry : tkaniStats.entrySet()) {
                String tkan = entry.getKey();
                int count = entry.getValue();

                // Высота столбца
                int barHeight = (int) ((count / (double) maxCount) * chartHeight);

                // Цвет столбца
                g2d.setColor(colors[colorIndex % colors.length]);
                g2d.fillRect(x, baseY - barHeight, barWidth, barHeight);

                // Рамка столбца
                g2d.setColor(Color.BLACK);
                g2d.drawRect(x, baseY - barHeight, barWidth, barHeight);

                // Название ткани
                g2d.setFont(new Font("Dialog", Font.PLAIN, 10));
                String displayName = tkan.length() > 12 ? tkan.substring(0, 12) + "..." : tkan;
                int textWidth = g2d.getFontMetrics().stringWidth(displayName);
                g2d.drawString(displayName, x + barWidth / 2 - textWidth / 2, baseY + 15);

                // Количество
                g2d.setFont(new Font("Dialog", Font.BOLD, 10));
                String countText = String.valueOf(count);
                int countWidth = g2d.getFontMetrics().stringWidth(countText);
                g2d.drawString(countText, x + barWidth / 2 - countWidth / 2, baseY - barHeight - 5);

                x += barWidth + 15;
                colorIndex++;
            }

            // Ось Y
            g2d.setColor(Color.BLACK);
            g2d.drawLine(60, baseY, 60, 80);
            g2d.drawLine(60, baseY, width - 20, baseY);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(700, 500);
        }
    }

    class PeriodOrdersFurnituraChartPanel extends JPanel {

        private Map<String, Integer> furnituraStats;
        private String startDate;
        private String endDate;

        public PeriodOrdersFurnituraChartPanel(Map<String, Integer> furnituraStats, String startDate, String endDate) {
            this.furnituraStats = furnituraStats;
            this.startDate = startDate;
            this.endDate = endDate;
            setBackground(Color.WHITE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            int width = getWidth();
            int height = getHeight();

            // Заголовок
            g2d.setFont(new Font("Dialog", Font.BOLD, 18));
            g2d.setColor(new Color(255, 165, 0));
            String title = "Фурнитура в заказах за период с " + startDate + " по " + endDate;
            g2d.drawString(title, width / 2 - g2d.getFontMetrics().stringWidth(title) / 2, 30);

            if (furnituraStats.isEmpty()) {
                g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
                g2d.setColor(Color.RED);
                g2d.drawString("Нет данных для отображения", width / 2 - 80, height / 2);
                return;
            }

            // Находим максимальное значение для масштабирования
            int maxCount = furnituraStats.values().stream().max(Integer::compare).orElse(1);

            // Параметры для столбцов
            int barWidth = Math.max(40, (width - 100) / furnituraStats.size() - 10);
            int startX = 80;
            int baseY = height - 100;
            int chartHeight = height - 200;

            // Рисуем столбцы
            int x = startX;
            int colorIndex = 0;
            Color[] colors = {
                new Color(255, 165, 0), new Color(255, 140, 0),
                new Color(255, 215, 0), new Color(255, 193, 37)
            };

            for (Map.Entry<String, Integer> entry : furnituraStats.entrySet()) {
                String furnitura = entry.getKey();
                int count = entry.getValue();

                // Высота столбца
                int barHeight = (int) ((count / (double) maxCount) * chartHeight);

                // Цвет столбца
                g2d.setColor(colors[colorIndex % colors.length]);
                g2d.fillRect(x, baseY - barHeight, barWidth, barHeight);

                // Рамка столбца
                g2d.setColor(Color.BLACK);
                g2d.drawRect(x, baseY - barHeight, barWidth, barHeight);

                // Название фурнитуры
                g2d.setFont(new Font("Dialog", Font.PLAIN, 10));
                String displayName = furnitura.length() > 12 ? furnitura.substring(0, 12) + "..." : furnitura;
                int textWidth = g2d.getFontMetrics().stringWidth(displayName);
                g2d.drawString(displayName, x + barWidth / 2 - textWidth / 2, baseY + 15);

                // Количество
                g2d.setFont(new Font("Dialog", Font.BOLD, 10));
                String countText = String.valueOf(count);
                int countWidth = g2d.getFontMetrics().stringWidth(countText);
                g2d.drawString(countText, x + barWidth / 2 - countWidth / 2, baseY - barHeight - 5);

                x += barWidth + 15;
                colorIndex++;
            }

            // Ось Y
            g2d.setColor(Color.BLACK);
            g2d.drawLine(60, baseY, 60, 80);
            g2d.drawLine(60, baseY, width - 20, baseY);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(700, 500);
        }
    }

    private void loadOrdersForMonth() {
        try {
            // Получаем выбранный месяц и год из правильных полей
            String selectedMonth = (String) jComboBox2.getSelectedItem();
            String yearText = jTextField2.getText().trim();

            // Проверяем, что год введен
            if (yearText.isEmpty()) {
                JOptionPane.showMessageDialog(this, "Пожалуйста, введите год", "Ошибка", JOptionPane.ERROR_MESSAGE);
                return;
            }

            try {
                int year = Integer.parseInt(yearText);
                int monthNumber = getMonthNumber(selectedMonth);

                // Формируем URL
                String urlString = "http://localhost:8080/atelie/ZakazyZaMesiac"
                        + "?month=" + monthNumber + "&year=" + year;

                System.out.println("=== ЗАПРОС ЗАКАЗОВ ЗА МЕСЯЦ ===");
                System.out.println("URL: " + urlString);

                // Создаем соединение
                URL url = new URL(urlString);
                HttpURLConnection connection = (HttpURLConnection) url.openConnection();
                connection.setRequestMethod("POST");
                connection.setRequestProperty("Accept", "application/json");
                connection.setConnectTimeout(10000);
                connection.setReadTimeout(10000);

                // Получаем ответ
                int responseCode = connection.getResponseCode();
                System.out.println("Код ответа: " + responseCode);

                if (responseCode == HttpURLConnection.HTTP_OK) {
                    BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream(), "UTF-8"));
                    String inputLine;
                    StringBuilder response = new StringBuilder();

                    while ((inputLine = in.readLine()) != null) {
                        response.append(inputLine);
                    }
                    in.close();

                    System.out.println("Полный ответ: " + response.toString());

                    // Парсим JSON ответ
                    JSONArray jsonArray = new JSONArray(response.toString());

                    // Обрабатываем данные для графика
                    processOrdersDataForChart(jsonArray, monthNumber, year);

                } else {
                    System.err.println("HTTP ошибка: " + responseCode);
                    JOptionPane.showMessageDialog(this, "Ошибка при получении данных с сервера: " + responseCode,
                            "Ошибка", JOptionPane.ERROR_MESSAGE);
                }

            } catch (NumberFormatException e) {
                JOptionPane.showMessageDialog(this, "Пожалуйста, введите корректный год", "Ошибка", JOptionPane.ERROR_MESSAGE);
            }

        } catch (Exception e) {
            System.err.println("Общая ошибка:");
            e.printStackTrace();
            JOptionPane.showMessageDialog(this, "Ошибка при подключении к серверу: " + e.getMessage(),
                    "Ошибка", JOptionPane.ERROR_MESSAGE);
        }
    }

    private void processOrdersDataForChart(JSONArray data, int month, int year) {
        // Если данных нет
        if (data.length() == 0 || (data.length() == 1 && data.getString(0).contains("не найдены"))) {
            showNoOrdersMessage(month, year);
            return;
        }

        // Собираем статистику по статусам и изделиям
        Map<String, Integer> statusStats = new HashMap<>();
        Map<String, Integer> izdelieStats = new HashMap<>();
        Map<String, Integer> shveyaStats = new HashMap<>();

        int totalOrders = 0;
        double totalRevenue = 0;

        System.out.println("Начало обработки " + data.length() + " заказов");

        try {
            for (int i = 0; i < data.length(); i++) {
                String item = data.getString(i);

                // Пропускаем строки статистики
                if (item.startsWith("===") || item.startsWith("Всего заказов:") || item.startsWith("Статус")) {
                    if (item.startsWith("Всего заказов:")) {
                        String countStr = item.replace("Всего заказов:", "").trim();
                        totalOrders = Integer.parseInt(countStr);
                    }
                    continue;
                }

                // Парсим информацию о заказе
                parseOrderItem(item, statusStats, izdelieStats, shveyaStats);
            }

            // Создаем и отображаем график
            createAndShowOrdersChart(statusStats, izdelieStats, shveyaStats, totalOrders, month, year);

        } catch (Exception e) {
            System.err.println("Ошибка обработки данных заказов:");
            e.printStackTrace();
            showNoOrdersMessage(month, year);
        }
    }

    private void parseOrderItem(String item, Map<String, Integer> statusStats,
            Map<String, Integer> izdelieStats, Map<String, Integer> shveyaStats) {
        try {
            // Парсим статус
            if (item.contains("Статус: ")) {
                int start = item.indexOf("Статус: ") + 8;
                int end = item.indexOf(",", start);
                if (end == -1) {
                    end = item.length();
                }
                String status = item.substring(start, end).trim();
                statusStats.put(status, statusStats.getOrDefault(status, 0) + 1);
            }

            // Парсим изделие
            if (item.contains("Изделие: ")) {
                int start = item.indexOf("Изделие: ") + 9;
                int end = item.indexOf(",", start);
                if (end == -1) {
                    end = item.length();
                }
                String izdelie = item.substring(start, end).trim();
                izdelieStats.put(izdelie, izdelieStats.getOrDefault(izdelie, 0) + 1);
            }

            // Парсим швею
            if (item.contains("Швея: ")) {
                int start = item.indexOf("Швея: ") + 6;
                int end = item.indexOf(",", start);
                if (end == -1) {
                    end = item.length();
                }
                String shveya = item.substring(start, end).trim();
                if (!shveya.equals("Не назначена")) {
                    shveyaStats.put(shveya, shveyaStats.getOrDefault(shveya, 0) + 1);
                }
            }

        } catch (Exception e) {
            System.err.println("Ошибка парсинга заказа: " + item);
            e.printStackTrace();
        }
    }

    private void createAndShowOrdersChart(Map<String, Integer> statusStats,
            Map<String, Integer> izdelieStats,
            Map<String, Integer> shveyaStats,
            int totalOrders, int month, int year) {
        // Очищаем панель перед отрисовкой нового графика
        jPanel6.removeAll();
        jPanel6.setLayout(new BorderLayout());

        // Создаем панель с вкладками для разных графиков
        JTabbedPane chartsTabbedPane = new JTabbedPane();

        // График по статусам
        JPanel statusPanel = new OrdersStatusChartPanel(statusStats, totalOrders, month, year);
        chartsTabbedPane.addTab("По статусам", statusPanel);

        // График по изделиям
        JPanel izdeliePanel = new OrdersIzdelieChartPanel(izdelieStats, totalOrders, month, year);
        chartsTabbedPane.addTab("По изделиям", izdeliePanel);

        // График по швеям
        if (!shveyaStats.isEmpty()) {
            JPanel shveyaPanel = new OrdersShveyaChartPanel(shveyaStats, totalOrders, month, year);
            chartsTabbedPane.addTab("По швеям", shveyaPanel);
        }

        jPanel6.add(chartsTabbedPane, BorderLayout.CENTER);

        // Обновляем интерфейс
        jPanel6.revalidate();
        jPanel6.repaint();
    }

    class OrdersStatusChartPanel extends JPanel {

        private Map<String, Integer> statusStats;
        private int totalOrders;
        private int month;
        private int year;

        public OrdersStatusChartPanel(Map<String, Integer> statusStats, int totalOrders, int month, int year) {
            this.statusStats = statusStats;
            this.totalOrders = totalOrders;
            this.month = month;
            this.year = year;
            setBackground(Color.WHITE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            int width = getWidth();
            int height = getHeight();

            // Заголовок
            String[] months = {"Январь", "Февраль", "Март", "Апрель", "Май", "Июнь",
                "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"};
            String monthName = months[month - 1];

            g2d.setFont(new Font("Dialog", Font.BOLD, 18));
            g2d.setColor(new Color(163, 27, 24));
            String title = "Статусы заказов за " + monthName + " " + year;
            g2d.drawString(title, width / 2 - g2d.getFontMetrics().stringWidth(title) / 2, 30);

            // Общая информация
            g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
            g2d.setColor(Color.BLACK);
            g2d.drawString("Всего заказов: " + totalOrders, 20, 70);

            if (statusStats.isEmpty()) {
                g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
                g2d.setColor(Color.RED);
                g2d.drawString("Нет данных для отображения", width / 2 - 80, height / 2);
                return;
            }

            // Параметры для круговой диаграммы
            int centerX = width / 2;
            int centerY = height / 2 + 50;
            int radius = Math.min(width, height) / 3;

            // Цвета для секторов
            Color[] colors = {
                new Color(163, 27, 24), new Color(30, 144, 255),
                new Color(50, 205, 50), new Color(255, 165, 0),
                new Color(148, 0, 211), new Color(255, 69, 0)
            };

            // Рассчитываем углы
            int total = statusStats.values().stream().mapToInt(Integer::intValue).sum();
            double startAngle = 0;
            int colorIndex = 0;

            // Рисуем секторы
            for (Map.Entry<String, Integer> entry : statusStats.entrySet()) {
                String status = entry.getKey();
                int count = entry.getValue();
                double angle = 360 * (count / (double) total);

                // Рисуем сектор
                g2d.setColor(colors[colorIndex % colors.length]);
                g2d.fillArc(centerX - radius, centerY - radius, radius * 2, radius * 2,
                        (int) startAngle, (int) angle);

                // Рамка сектора
                g2d.setColor(Color.BLACK);
                g2d.drawArc(centerX - radius, centerY - radius, radius * 2, radius * 2,
                        (int) startAngle, (int) angle);

                // Легенда
                int legendY = 100 + colorIndex * 25;
                g2d.setColor(colors[colorIndex % colors.length]);
                g2d.fillRect(20, legendY, 15, 15);
                g2d.setColor(Color.BLACK);
                g2d.drawRect(20, legendY, 15, 15);

                String legendText = String.format("%s: %d (%.1f%%)", status, count, (count * 100.0 / total));
                g2d.drawString(legendText, 45, legendY + 12);

                startAngle += angle;
                colorIndex++;
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(700, 500);
        }
    }

    class OrdersIzdelieChartPanel extends JPanel {

        private Map<String, Integer> izdelieStats;
        private int totalOrders;
        private int month;
        private int year;

        public OrdersIzdelieChartPanel(Map<String, Integer> izdelieStats, int totalOrders, int month, int year) {
            this.izdelieStats = izdelieStats;
            this.totalOrders = totalOrders;
            this.month = month;
            this.year = year;
            setBackground(Color.WHITE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            int width = getWidth();
            int height = getHeight();

            // Заголовок
            String[] months = {"Январь", "Февраль", "Март", "Апрель", "Май", "Июнь",
                "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"};
            String monthName = months[month - 1];

            g2d.setFont(new Font("Dialog", Font.BOLD, 18));
            g2d.setColor(new Color(0, 102, 102));
            String title = "Изделия за " + monthName + " " + year;
            g2d.drawString(title, width / 2 - g2d.getFontMetrics().stringWidth(title) / 2, 30);

            if (izdelieStats.isEmpty()) {
                g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
                g2d.setColor(Color.RED);
                g2d.drawString("Нет данных для отображения", width / 2 - 80, height / 2);
                return;
            }

            // Находим максимальное значение для масштабирования
            int maxCount = izdelieStats.values().stream().max(Integer::compare).orElse(1);

            // Параметры для столбцов
            int barWidth = Math.max(40, (width - 100) / izdelieStats.size() - 10);
            int startX = 80;
            int baseY = height - 100;
            int chartHeight = height - 200;

            // Рисуем столбцы
            int x = startX;
            int colorIndex = 0;
            Color[] colors = {
                new Color(0, 102, 102), new Color(0, 128, 128),
                new Color(0, 150, 150), new Color(0, 180, 180)
            };

            for (Map.Entry<String, Integer> entry : izdelieStats.entrySet()) {
                String izdelie = entry.getKey();
                int count = entry.getValue();

                // Высота столбца
                int barHeight = (int) ((count / (double) maxCount) * chartHeight);

                // Цвет столбца
                g2d.setColor(colors[colorIndex % colors.length]);
                g2d.fillRect(x, baseY - barHeight, barWidth, barHeight);

                // Рамка столбца
                g2d.setColor(Color.BLACK);
                g2d.drawRect(x, baseY - barHeight, barWidth, barHeight);

                // Название изделия
                g2d.setFont(new Font("Dialog", Font.PLAIN, 10));
                String displayName = izdelie.length() > 12 ? izdelie.substring(0, 12) + "..." : izdelie;
                int textWidth = g2d.getFontMetrics().stringWidth(displayName);
                g2d.drawString(displayName, x + barWidth / 2 - textWidth / 2, baseY + 15);

                // Количество
                g2d.setFont(new Font("Dialog", Font.BOLD, 10));
                String countText = String.valueOf(count);
                int countWidth = g2d.getFontMetrics().stringWidth(countText);
                g2d.drawString(countText, x + barWidth / 2 - countWidth / 2, baseY - barHeight - 5);

                x += barWidth + 15;
                colorIndex++;
            }

            // Ось Y
            g2d.setColor(Color.BLACK);
            g2d.drawLine(60, baseY, 60, 80);
            g2d.drawLine(60, baseY, width - 20, baseY);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(700, 500);
        }
    }

    class OrdersShveyaChartPanel extends JPanel {

        private Map<String, Integer> shveyaStats;
        private int totalOrders;
        private int month;
        private int year;

        public OrdersShveyaChartPanel(Map<String, Integer> shveyaStats, int totalOrders, int month, int year) {
            this.shveyaStats = shveyaStats;
            this.totalOrders = totalOrders;
            this.month = month;
            this.year = year;
            setBackground(Color.WHITE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            int width = getWidth();
            int height = getHeight();

            // Заголовок
            String[] months = {"Январь", "Февраль", "Март", "Апрель", "Май", "Июнь",
                "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"};
            String monthName = months[month - 1];

            g2d.setFont(new Font("Dialog", Font.BOLD, 18));
            g2d.setColor(new Color(148, 0, 211));
            String title = "Распределение по швеям за " + monthName + " " + year;
            g2d.drawString(title, width / 2 - g2d.getFontMetrics().stringWidth(title) / 2, 30);

            if (shveyaStats.isEmpty()) {
                g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
                g2d.setColor(Color.RED);
                g2d.drawString("Нет данных для отображения", width / 2 - 80, height / 2);
                return;
            }

            // Находим максимальное значение для масштабирования
            int maxCount = shveyaStats.values().stream().max(Integer::compare).orElse(1);

            // Параметры для столбцов
            int barWidth = Math.max(40, (width - 100) / shveyaStats.size() - 10);
            int startX = 80;
            int baseY = height - 100;
            int chartHeight = height - 200;

            // Рисуем столбцы
            int x = startX;
            int colorIndex = 0;
            Color[] colors = {
                new Color(148, 0, 211), new Color(160, 30, 220),
                new Color(170, 60, 230), new Color(180, 90, 240)
            };

            for (Map.Entry<String, Integer> entry : shveyaStats.entrySet()) {
                String shveya = entry.getKey();
                int count = entry.getValue();

                // Высота столбца
                int barHeight = (int) ((count / (double) maxCount) * chartHeight);

                // Цвет столбца
                g2d.setColor(colors[colorIndex % colors.length]);
                g2d.fillRect(x, baseY - barHeight, barWidth, barHeight);

                // Рамка столбца
                g2d.setColor(Color.BLACK);
                g2d.drawRect(x, baseY - barHeight, barWidth, barHeight);

                // Имя швеи
                g2d.setFont(new Font("Dialog", Font.PLAIN, 10));
                String displayName = shveya.length() > 12 ? shveya.substring(0, 12) + "..." : shveya;
                int textWidth = g2d.getFontMetrics().stringWidth(displayName);
                g2d.drawString(displayName, x + barWidth / 2 - textWidth / 2, baseY + 15);

                // Количество заказов
                g2d.setFont(new Font("Dialog", Font.BOLD, 10));
                String countText = String.valueOf(count);
                int countWidth = g2d.getFontMetrics().stringWidth(countText);
                g2d.drawString(countText, x + barWidth / 2 - countWidth / 2, baseY - barHeight - 5);

                x += barWidth + 15;
                colorIndex++;
            }

            // Ось Y
            g2d.setColor(Color.BLACK);
            g2d.drawLine(60, baseY, 60, 80);
            g2d.drawLine(60, baseY, width - 20, baseY);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(700, 500);
        }
    }

    private void showNoOrdersMessage(int month, int year) {
        jPanel6.removeAll();
        jPanel6.setLayout(new BorderLayout());

        String[] months = {"Январь", "Февраль", "Март", "Апрель", "Май", "Июнь",
            "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"};
        String monthName = months[month - 1];

        JLabel noDataLabel = new JLabel("Заказы за " + monthName + " " + year + " года не найдены", JLabel.CENTER);
        noDataLabel.setFont(new Font("Dialog", Font.BOLD, 16));
        noDataLabel.setForeground(Color.RED);

        jPanel6.add(noDataLabel, BorderLayout.CENTER);
        jPanel6.revalidate();
        jPanel6.repaint();
    }

    private void loadSalesForPeriod() {
        try {
            // Получаем даты из полей ввода
            String startDate = jFormattedTextField6.getText().trim();
            String endDate = jFormattedTextField5.getText().trim();

            // Проверяем, что даты введены
            if (startDate.isEmpty() || endDate.isEmpty()) {
                JOptionPane.showMessageDialog(this, "Пожалуйста, введите обе даты", "Ошибка", JOptionPane.ERROR_MESSAGE);
                return;
            }

            // Проверяем формат дат (должны быть ####-##-##)
            if (!startDate.matches("\\d{4}-\\d{2}-\\d{2}") || !endDate.matches("\\d{4}-\\d{2}-\\d{2}")) {
                JOptionPane.showMessageDialog(this, "Неверный формат даты. Используйте: ГГГГ-ММ-ДД", "Ошибка", JOptionPane.ERROR_MESSAGE);
                return;
            }

            // Формируем URL
            String urlString = "http://localhost:8080/atelie/ProdazhiZaPeriod"
                    + "?startDate=" + URLEncoder.encode(startDate, "UTF-8")
                    + "&endDate=" + URLEncoder.encode(endDate, "UTF-8");

            System.out.println("=== ЗАПРОС ПРОДАЖ ЗА ПЕРИОД ===");
            System.out.println("URL: " + urlString);

            // Создаем соединение
            URL url = new URL(urlString);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setRequestMethod("POST");
            connection.setRequestProperty("Accept", "application/json");
            connection.setConnectTimeout(10000);
            connection.setReadTimeout(10000);

            // Получаем ответ
            int responseCode = connection.getResponseCode();
            System.out.println("Код ответа: " + responseCode);

            if (responseCode == HttpURLConnection.HTTP_OK) {
                BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream(), "UTF-8"));
                String inputLine;
                StringBuilder response = new StringBuilder();

                while ((inputLine = in.readLine()) != null) {
                    response.append(inputLine);
                }
                in.close();

                System.out.println("Полный ответ: " + response.toString());

                // Парсим JSON ответ
                JSONObject jsonObject = new JSONObject(response.toString());

                // Обрабатываем данные для графика
                processPeriodSalesData(jsonObject, startDate, endDate);

            } else {
                System.err.println("HTTP ошибка: " + responseCode);
                JOptionPane.showMessageDialog(this, "Ошибка при получении данных с сервера: " + responseCode,
                        "Ошибка", JOptionPane.ERROR_MESSAGE);
            }

        } catch (Exception e) {
            System.err.println("Общая ошибка:");
            e.printStackTrace();
            JOptionPane.showMessageDialog(this, "Ошибка при подключении к серверу: " + e.getMessage(),
                    "Ошибка", JOptionPane.ERROR_MESSAGE);
        }
    }

    private void processPeriodSalesData(JSONObject data, String startDate, String endDate) {
        try {
            // Получаем данные по тканям и фурнитуре
            JSONArray tkaniData = data.getJSONArray("tkani");
            JSONArray furnituraData = data.getJSONArray("furnitura");

            System.out.println("=== ОБРАБОТКА ДАННЫХ ЗА ПЕРИОД ===");
            System.out.println("Ткани найдено: " + tkaniData.length() + " записей");
            System.out.println("Фурнитура найдено: " + furnituraData.length() + " записей");

            // Проверяем, есть ли данные
            if ((tkaniData.length() == 0 || (tkaniData.length() == 1 && tkaniData.getString(0).contains("не найдены")))
                    && (furnituraData.length() == 0 || (furnituraData.length() == 1 && furnituraData.getString(0).contains("не найдены")))) {
                showNoPeriodDataMessage(startDate, endDate);
                return;
            }

            // Обрабатываем данные ткани
            Map<String, Double> fabricSales = new HashMap<>();
            Map<String, Integer> fabricCount = new HashMap<>();

            for (int i = 0; i < tkaniData.length(); i++) {
                String item = tkaniData.getString(i);
                if (!item.contains("не найдены") && !item.contains("Ошибка")) {
                    parseFabricSalesItem(item, fabricSales, fabricCount);
                }
            }

            System.out.println("Ткани обработаны. Уникальных тканей: " + fabricSales.size());
            System.out.println("Суммы по тканям: " + fabricSales);

            // Обрабатываем данные фурнитуры
            Map<String, Double> furnitureSales = new HashMap<>();
            Map<String, Integer> furnitureCount = new HashMap<>();

            for (int i = 0; i < furnituraData.length(); i++) {
                String item = furnituraData.getString(i);
                if (!item.contains("не найдены") && !item.contains("Ошибка")) {
                    parseSalesItemSimple(item, furnitureSales, furnitureCount);
                }
            }

            System.out.println("Фурнитура обработана. Уникальных товаров: " + furnitureSales.size());
            System.out.println("Суммы по фурнитуре: " + furnitureSales);

            // Создаем и отображаем график
            createAndShowPeriodChart(fabricSales, fabricCount, furnitureSales, furnitureCount, startDate, endDate);

        } catch (Exception e) {
            System.err.println("Ошибка обработки данных за период:");
            e.printStackTrace();
            showNoPeriodDataMessage(startDate, endDate);
        }
    }

    private void createAndShowPeriodChart(Map<String, Double> fabricSales, Map<String, Integer> fabricCount,
            Map<String, Double> furnitureSales, Map<String, Integer> furnitureCount,
            String startDate, String endDate) {
        // Очищаем панель перед отрисовкой нового графика
        jPanel15.removeAll();
        jPanel15.setLayout(new BorderLayout());

        // Создаем панель с вкладками для разных графиков
        JTabbedPane chartsTabbedPane = new JTabbedPane();

        // График по тканям
        if (!fabricSales.isEmpty()) {
            JPanel fabricPanel = new PeriodFabricChartPanel(fabricSales, fabricCount, startDate, endDate);
            chartsTabbedPane.addTab("Ткани", fabricPanel);
        }

        // График по фурнитуре
        if (!furnitureSales.isEmpty()) {
            JPanel furniturePanel = new PeriodFurnitureChartPanel(furnitureSales, furnitureCount, startDate, endDate);
            chartsTabbedPane.addTab("Фурнитура", furniturePanel);
        }

        // Сводный график
        if (!fabricSales.isEmpty() || !furnitureSales.isEmpty()) {
            JPanel summaryPanel = new PeriodSummaryChartPanel(fabricSales, furnitureSales, startDate, endDate);
            chartsTabbedPane.addTab("Сводный", summaryPanel);
        }

        jPanel15.add(chartsTabbedPane, BorderLayout.CENTER);

        // Обновляем интерфейс
        jPanel15.revalidate();
        jPanel15.repaint();
    }

    private void showNoPeriodDataMessage(String startDate, String endDate) {
        jPanel15.removeAll();
        jPanel15.setLayout(new BorderLayout());

        JLabel noDataLabel = new JLabel("Продажи за период с " + startDate + " по " + endDate + " не найдены", JLabel.CENTER);
        noDataLabel.setFont(new Font("Dialog", Font.BOLD, 16));
        noDataLabel.setForeground(Color.RED);

        jPanel15.add(noDataLabel, BorderLayout.CENTER);
        jPanel15.revalidate();
        jPanel15.repaint();
    }

    class PeriodFabricChartPanel extends JPanel {

        private Map<String, Double> sales;
        private Map<String, Integer> counts;
        private String startDate;
        private String endDate;

        public PeriodFabricChartPanel(Map<String, Double> sales, Map<String, Integer> counts, String startDate, String endDate) {
            this.sales = sales;
            this.counts = counts;
            this.startDate = startDate;
            this.endDate = endDate;
            setBackground(Color.WHITE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            int width = getWidth();
            int height = getHeight();

            // Заголовок
            g2d.setFont(new Font("Dialog", Font.BOLD, 18));
            g2d.setColor(new Color(0, 102, 102));
            String title = "Продажи ткани за период с " + startDate + " по " + endDate;
            g2d.drawString(title, width / 2 - g2d.getFontMetrics().stringWidth(title) / 2, 30);

            if (sales.isEmpty()) {
                g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
                g2d.setColor(Color.RED);
                g2d.drawString("Нет данных для отображения", width / 2 - 80, height / 2);
                return;
            }

            // Общая статистика
            double totalRevenue = sales.values().stream().mapToDouble(Double::doubleValue).sum();
            int totalCount = counts.values().stream().mapToInt(Integer::intValue).sum();

            g2d.setFont(new Font("Dialog", Font.PLAIN, 12));
            g2d.setColor(Color.BLACK);
            g2d.drawString("Общая выручка: " + String.format("%.2f руб.", totalRevenue), 20, 60);
            g2d.drawString("Всего рулонов: " + totalCount, 20, 80);

            // Находим максимальное значение для масштабирования
            double maxSales = sales.values().stream().max(Double::compare).orElse(1.0);

            // Параметры для столбцов
            int barWidth = Math.max(40, (width - 100) / sales.size() - 20);
            int startX = 50;
            int baseY = height - 100;
            int chartHeight = height - 150;

            // Цвета для столбцов ткани
            Color[] colors = {
                new Color(0, 102, 102), new Color(0, 128, 128),
                new Color(0, 150, 150), new Color(0, 180, 180)
            };

            // Рисуем столбцы
            int colorIndex = 0;
            int x = startX;

            for (Map.Entry<String, Double> entry : sales.entrySet()) {
                String fabric = entry.getKey();
                double salesAmount = entry.getValue();
                int count = counts.get(fabric);

                // Высота столбца
                int barHeight = (int) ((salesAmount / maxSales) * chartHeight);

                // Рисуем столбец
                g2d.setColor(colors[colorIndex % colors.length]);
                g2d.fillRect(x, baseY - barHeight, barWidth, barHeight);

                // Рамка столбца
                g2d.setColor(Color.BLACK);
                g2d.drawRect(x, baseY - barHeight, barWidth, barHeight);

                // Название ткани
                g2d.setFont(new Font("Dialog", Font.PLAIN, 10));
                String displayName = fabric.length() > 10 ? fabric.substring(0, 10) + "..." : fabric;
                int textWidth = g2d.getFontMetrics().stringWidth(displayName);
                g2d.drawString(displayName, x + barWidth / 2 - textWidth / 2, baseY + 15);

                // Сумма продаж
                g2d.setFont(new Font("Dialog", Font.BOLD, 10));
                String salesText = String.format("%.0f", salesAmount);
                int salesWidth = g2d.getFontMetrics().stringWidth(salesText);
                g2d.drawString(salesText, x + barWidth / 2 - salesWidth / 2, baseY - barHeight - 5);

                // Количество рулонов
                g2d.setFont(new Font("Dialog", Font.PLAIN, 9));
                String countText = "Рулоны: " + count;
                int countWidth = g2d.getFontMetrics().stringWidth(countText);
                g2d.drawString(countText, x + barWidth / 2 - countWidth / 2, baseY - barHeight - 20);

                x += barWidth + 20;
                colorIndex++;
            }

            // Ось Y
            g2d.setColor(Color.BLACK);
            g2d.drawLine(40, baseY, 40, 50);
            g2d.drawLine(40, baseY, width - 20, baseY);

            // Разметка оси Y
            g2d.setFont(new Font("Dialog", Font.PLAIN, 10));
            for (int i = 0; i <= 5; i++) {
                int y = baseY - (i * chartHeight / 5);
                String value = String.format("%.0f", maxSales * i / 5);
                g2d.drawString(value, 10, y + 5);
                g2d.drawLine(35, y, 40, y);
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(800, 500);
        }
    }

    class PeriodFurnitureChartPanel extends JPanel {

        private Map<String, Double> sales;
        private Map<String, Integer> counts;
        private String startDate;
        private String endDate;

        public PeriodFurnitureChartPanel(Map<String, Double> sales, Map<String, Integer> counts, String startDate, String endDate) {
            this.sales = sales;
            this.counts = counts;
            this.startDate = startDate;
            this.endDate = endDate;
            setBackground(Color.WHITE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            int width = getWidth();
            int height = getHeight();

            // Заголовок
            g2d.setFont(new Font("Dialog", Font.BOLD, 18));
            g2d.setColor(new Color(163, 27, 24));
            String title = "Продажи фурнитуры за период с " + startDate + " по " + endDate;
            g2d.drawString(title, width / 2 - g2d.getFontMetrics().stringWidth(title) / 2, 30);

            if (sales.isEmpty()) {
                g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
                g2d.setColor(Color.RED);
                g2d.drawString("Нет данных для отображения", width / 2 - 80, height / 2);
                return;
            }

            // Общая статистика
            double totalRevenue = sales.values().stream().mapToDouble(Double::doubleValue).sum();
            int totalCount = counts.values().stream().mapToInt(Integer::intValue).sum();

            g2d.setFont(new Font("Dialog", Font.PLAIN, 12));
            g2d.setColor(Color.BLACK);
            g2d.drawString("Общая выручка: " + String.format("%.2f руб.", totalRevenue), 20, 60);
            g2d.drawString("Всего единиц: " + totalCount, 20, 80);

            // Находим максимальное значение для масштабирования
            double maxSales = sales.values().stream().max(Double::compare).orElse(1.0);

            // Параметры для столбцов
            int barWidth = Math.max(40, (width - 100) / sales.size() - 20);
            int startX = 50;
            int baseY = height - 100;
            int chartHeight = height - 150;

            // Цвета для столбцов фурнитуры
            Color[] colors = {
                new Color(163, 27, 24), new Color(200, 50, 50),
                new Color(220, 80, 80), new Color(240, 120, 120)
            };

            // Рисуем столбцы
            int colorIndex = 0;
            int x = startX;

            for (Map.Entry<String, Double> entry : sales.entrySet()) {
                String furniture = entry.getKey();
                double salesAmount = entry.getValue();
                int count = counts.get(furniture);

                // Высота столбца
                int barHeight = (int) ((salesAmount / maxSales) * chartHeight);

                // Рисуем столбец
                g2d.setColor(colors[colorIndex % colors.length]);
                g2d.fillRect(x, baseY - barHeight, barWidth, barHeight);

                // Рамка столбца
                g2d.setColor(Color.BLACK);
                g2d.drawRect(x, baseY - barHeight, barWidth, barHeight);

                // Название фурнитуры
                g2d.setFont(new Font("Dialog", Font.PLAIN, 10));
                String displayName = furniture.length() > 10 ? furniture.substring(0, 10) + "..." : furniture;
                int textWidth = g2d.getFontMetrics().stringWidth(displayName);
                g2d.drawString(displayName, x + barWidth / 2 - textWidth / 2, baseY + 15);

                // Сумма продаж
                g2d.setFont(new Font("Dialog", Font.BOLD, 10));
                String salesText = String.format("%.0f", salesAmount);
                int salesWidth = g2d.getFontMetrics().stringWidth(salesText);
                g2d.drawString(salesText, x + barWidth / 2 - salesWidth / 2, baseY - barHeight - 5);

                // Количество
                g2d.setFont(new Font("Dialog", Font.PLAIN, 9));
                String countText = "Кол-во: " + count;
                int countWidth = g2d.getFontMetrics().stringWidth(countText);
                g2d.drawString(countText, x + barWidth / 2 - countWidth / 2, baseY - barHeight - 20);

                x += barWidth + 20;
                colorIndex++;
            }

            // Ось Y
            g2d.setColor(Color.BLACK);
            g2d.drawLine(40, baseY, 40, 50);
            g2d.drawLine(40, baseY, width - 20, baseY);

            // Разметка оси Y
            g2d.setFont(new Font("Dialog", Font.PLAIN, 10));
            for (int i = 0; i <= 5; i++) {
                int y = baseY - (i * chartHeight / 5);
                String value = String.format("%.0f", maxSales * i / 5);
                g2d.drawString(value, 10, y + 5);
                g2d.drawLine(35, y, 40, y);
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(800, 500);
        }
    }

    class PeriodSummaryChartPanel extends JPanel {

        private Map<String, Double> fabricSales;
        private Map<String, Double> furnitureSales;
        private String startDate;
        private String endDate;

        public PeriodSummaryChartPanel(Map<String, Double> fabricSales, Map<String, Double> furnitureSales,
                String startDate, String endDate) {
            this.fabricSales = fabricSales;
            this.furnitureSales = furnitureSales;
            this.startDate = startDate;
            this.endDate = endDate;
            setBackground(Color.WHITE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            int width = getWidth();
            int height = getHeight();

            // Заголовок
            g2d.setFont(new Font("Dialog", Font.BOLD, 18));
            g2d.setColor(new Color(148, 0, 211));
            String title = "Сводная статистика за период с " + startDate + " по " + endDate;
            g2d.drawString(title, width / 2 - g2d.getFontMetrics().stringWidth(title) / 2, 30);

            // Рассчитываем общие суммы
            double fabricTotal = fabricSales.values().stream().mapToDouble(Double::doubleValue).sum();
            double furnitureTotal = furnitureSales.values().stream().mapToDouble(Double::doubleValue).sum();
            double grandTotal = fabricTotal + furnitureTotal;

            // Общая информация
            g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
            g2d.setColor(Color.BLACK);
            g2d.drawString("Общая выручка: " + String.format("%.2f руб.", grandTotal), 20, 70);
            g2d.drawString("Выручка от тканей: " + String.format("%.2f руб.", fabricTotal), 20, 95);
            g2d.drawString("Выручка от фурнитуры: " + String.format("%.2f руб.", furnitureTotal), 20, 120);

            if (grandTotal == 0) {
                g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
                g2d.setColor(Color.RED);
                g2d.drawString("Нет данных для отображения", width / 2 - 80, height / 2);
                return;
            }

            // Параметры для круговой диаграммы
            int centerX = width / 2;
            int centerY = height / 2 + 50;
            int radius = Math.min(width, height) / 4;

            // Рассчитываем углы
            double fabricAngle = 360 * (fabricTotal / grandTotal);
            double furnitureAngle = 360 * (furnitureTotal / grandTotal);

            // Рисуем сектор тканей
            g2d.setColor(new Color(0, 102, 102));
            g2d.fillArc(centerX - radius, centerY - radius, radius * 2, radius * 2, 0, (int) fabricAngle);

            // Рисуем сектор фурнитуры
            g2d.setColor(new Color(163, 27, 24));
            g2d.fillArc(centerX - radius, centerY - radius, radius * 2, radius * 2, (int) fabricAngle, (int) furnitureAngle);

            // Рамка диаграммы
            g2d.setColor(Color.BLACK);
            g2d.drawArc(centerX - radius, centerY - radius, radius * 2, radius * 2, 0, 360);

            // Легенда
            int legendY = 150;

            // Ткани
            g2d.setColor(new Color(0, 102, 102));
            g2d.fillRect(20, legendY, 15, 15);
            g2d.setColor(Color.BLACK);
            g2d.drawRect(20, legendY, 15, 15);
            String fabricText = String.format("Ткани: %.2f руб. (%.1f%%)", fabricTotal, (fabricTotal / grandTotal * 100));
            g2d.drawString(fabricText, 45, legendY + 12);

            // Фурнитура
            g2d.setColor(new Color(163, 27, 24));
            g2d.fillRect(20, legendY + 25, 15, 15);
            g2d.setColor(Color.BLACK);
            g2d.drawRect(20, legendY + 25, 15, 15);
            String furnitureText = String.format("Фурнитура: %.2f руб. (%.1f%%)", furnitureTotal, (furnitureTotal / grandTotal * 100));
            g2d.drawString(furnitureText, 45, legendY + 37);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(800, 500);
        }
    }

    private void loadAllOrders() {
        try {
            // Формируем URL
            String urlString = "http://localhost:8080/atelie/VseZakazy";

            System.out.println("=== ЗАПРОС ВСЕХ ЗАКАЗОВ ===");
            System.out.println("URL: " + urlString);

            // Создаем соединение
            URL url = new URL(urlString);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setRequestMethod("POST");
            connection.setRequestProperty("Accept", "application/json");
            connection.setConnectTimeout(10000);
            connection.setReadTimeout(10000);

            // Получаем ответ
            int responseCode = connection.getResponseCode();
            System.out.println("Код ответа: " + responseCode);

            if (responseCode == HttpURLConnection.HTTP_OK) {
                BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream(), "UTF-8"));
                String inputLine;
                StringBuilder response = new StringBuilder();

                while ((inputLine = in.readLine()) != null) {
                    response.append(inputLine);
                }
                in.close();

                System.out.println("Полный ответ: " + response.toString());

                // Парсим JSON ответ
                JSONArray jsonArray = new JSONArray(response.toString());
                System.out.println("Количество заказов: " + jsonArray.length());

                // Обрабатываем данные для графика
                processAllOrdersData(jsonArray);

            } else {
                System.err.println("HTTP ошибка: " + responseCode);
                JOptionPane.showMessageDialog(this, "Ошибка при получении данных с сервера: " + responseCode,
                        "Ошибка", JOptionPane.ERROR_MESSAGE);
            }

        } catch (Exception e) {
            System.err.println("Общая ошибка:");
            e.printStackTrace();
            JOptionPane.showMessageDialog(this, "Ошибка при подключении к серверу: " + e.getMessage(),
                    "Ошибка", JOptionPane.ERROR_MESSAGE);
        }
    }

    private void processAllOrdersData(JSONArray data) {
        // Если данных нет
        if (data.length() == 0) {
            showNoOrdersMessage();
            return;
        }

        // Собираем статистику по статусам
        Map<String, Integer> statusStats = new HashMap<>();
        Map<String, Integer> monthlyStats = new HashMap<>();
        Map<String, Integer> clientStats = new HashMap<>();

        int totalOrders = data.length();
        double totalRevenue = 0;

        System.out.println("Начало обработки " + data.length() + " заказов");

        try {
            for (int i = 0; i < data.length(); i++) {
                String orderInfo = data.getString(i);

                // Парсим информацию о заказе
                parseOrderInfo(orderInfo, statusStats, monthlyStats, clientStats);
            }

            // Создаем и отображаем график
            createAndShowAllOrdersChart(statusStats, monthlyStats, clientStats, totalOrders);

        } catch (Exception e) {
            System.err.println("Ошибка обработки данных заказов:");
            e.printStackTrace();
            showNoOrdersMessage();
        }
    }

    private void parseOrderInfo(String orderInfo, Map<String, Integer> statusStats,
            Map<String, Integer> monthlyStats, Map<String, Integer> clientStats) {
        try {
            // Парсим статус
            if (orderInfo.contains("Статус: ")) {
                int start = orderInfo.indexOf("Статус: ") + 8;
                int end = orderInfo.indexOf(",", start);
                if (end == -1) {
                    end = orderInfo.length();
                }
                String status = orderInfo.substring(start, end).trim();
                statusStats.put(status, statusStats.getOrDefault(status, 0) + 1);
            }

            // Парсим дату для месяца
            if (orderInfo.contains("от ")) {
                int start = orderInfo.indexOf("от ") + 3;
                int end = orderInfo.indexOf(":", start);
                if (end > start) {
                    String dateStr = orderInfo.substring(start, end).trim();
                    // Извлекаем месяц из даты (предполагаем формат "2024-03-15")
                    if (dateStr.length() >= 7) {
                        String monthKey = dateStr.substring(0, 7); // "2024-03"
                        monthlyStats.put(monthKey, monthlyStats.getOrDefault(monthKey, 0) + 1);
                    }
                }
            }

            // Парсим клиента
            if (orderInfo.contains("Клиент: ")) {
                int start = orderInfo.indexOf("Клиент: ") + 8;
                int end = orderInfo.indexOf(",", start);
                if (end > start) {
                    String client = orderInfo.substring(start, end).trim();
                    clientStats.put(client, clientStats.getOrDefault(client, 0) + 1);
                }
            }

        } catch (Exception e) {
            System.err.println("Ошибка парсинга информации о заказе: " + orderInfo);
            e.printStackTrace();
        }
    }

    private void createAndShowAllOrdersChart(Map<String, Integer> statusStats,
            Map<String, Integer> monthlyStats,
            Map<String, Integer> clientStats,
            int totalOrders) {
        // Очищаем панель перед отрисовкой нового графика
        jPanel8.removeAll();
        jPanel8.setLayout(new BorderLayout());

        // Создаем панель с вкладками для разных графиков
        JTabbedPane chartsTabbedPane = new JTabbedPane();

        // График по статусам
        JPanel statusPanel = new AllOrdersStatusChartPanel(statusStats, totalOrders);
        chartsTabbedPane.addTab("По статусам", statusPanel);

        // График по месяцам
        JPanel monthlyPanel = new AllOrdersMonthlyChartPanel(monthlyStats, totalOrders);
        chartsTabbedPane.addTab("По месяцам", monthlyPanel);

        // График по клиентам (топ 10)
        JPanel clientPanel = new AllOrdersClientChartPanel(clientStats, totalOrders);
        chartsTabbedPane.addTab("По клиентам", clientPanel);

        jPanel8.add(chartsTabbedPane, BorderLayout.CENTER);

        // Обновляем интерфейс
        jPanel8.revalidate();
        jPanel8.repaint();
    }

    private void showNoOrdersMessage() {
        jPanel8.removeAll();
        jPanel8.setLayout(new BorderLayout());

        JLabel noDataLabel = new JLabel("Заказы не найдены", JLabel.CENTER);
        noDataLabel.setFont(new Font("Dialog", Font.BOLD, 16));
        noDataLabel.setForeground(Color.RED);

        jPanel8.add(noDataLabel, BorderLayout.CENTER);
        jPanel8.revalidate();
        jPanel8.repaint();
    }

    class AllOrdersStatusChartPanel extends JPanel {

        private Map<String, Integer> statusStats;
        private int totalOrders;

        public AllOrdersStatusChartPanel(Map<String, Integer> statusStats, int totalOrders) {
            this.statusStats = statusStats;
            this.totalOrders = totalOrders;
            setBackground(Color.WHITE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            int width = getWidth();
            int height = getHeight();

            // Заголовок
            g2d.setFont(new Font("Dialog", Font.BOLD, 18));
            g2d.setColor(new Color(163, 27, 24));
            String title = "Статистика заказов по статусам";
            g2d.drawString(title, width / 2 - g2d.getFontMetrics().stringWidth(title) / 2, 30);

            // Общая информация
            g2d.setFont(new Font("Dialog", Font.PLAIN, 12));
            g2d.setColor(Color.BLACK);
            g2d.drawString("Всего заказов: " + totalOrders, 20, 60);

            if (statusStats.isEmpty()) {
                g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
                g2d.setColor(Color.RED);
                g2d.drawString("Нет данных для отображения", width / 2 - 80, height / 2);
                return;
            }

            // Параметры для круговой диаграммы
            int centerX = width / 2;
            int centerY = height / 2 + 50;
            int radius = Math.min(width, height) / 3;

            // Цвета для секторов
            Color[] colors = {
                new Color(163, 27, 24), new Color(30, 144, 255),
                new Color(50, 205, 50), new Color(255, 165, 0),
                new Color(148, 0, 211), new Color(255, 69, 0)
            };

            // Рассчитываем углы
            int total = statusStats.values().stream().mapToInt(Integer::intValue).sum();
            double startAngle = 0;
            int colorIndex = 0;

            // Рисуем секторы
            for (Map.Entry<String, Integer> entry : statusStats.entrySet()) {
                String status = entry.getKey();
                int count = entry.getValue();
                double angle = 360 * (count / (double) total);

                // Рисуем сектор
                g2d.setColor(colors[colorIndex % colors.length]);
                g2d.fillArc(centerX - radius, centerY - radius, radius * 2, radius * 2,
                        (int) startAngle, (int) angle);

                // Рамка сектора
                g2d.setColor(Color.BLACK);
                g2d.drawArc(centerX - radius, centerY - radius, radius * 2, radius * 2,
                        (int) startAngle, (int) angle);

                // Легенда
                int legendY = 100 + colorIndex * 25;
                g2d.setColor(colors[colorIndex % colors.length]);
                g2d.fillRect(20, legendY, 15, 15);
                g2d.setColor(Color.BLACK);
                g2d.drawRect(20, legendY, 15, 15);

                String legendText = String.format("%s: %d (%.1f%%)", status, count, (count * 100.0 / total));
                g2d.drawString(legendText, 45, legendY + 12);

                startAngle += angle;
                colorIndex++;
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(700, 500);
        }
    }

    class AllOrdersMonthlyChartPanel extends JPanel {

        private Map<String, Integer> monthlyStats;
        private int totalOrders;

        public AllOrdersMonthlyChartPanel(Map<String, Integer> monthlyStats, int totalOrders) {
            this.monthlyStats = monthlyStats;
            this.totalOrders = totalOrders;
            setBackground(Color.WHITE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            int width = getWidth();
            int height = getHeight();

            // Заголовок
            g2d.setFont(new Font("Dialog", Font.BOLD, 18));
            g2d.setColor(new Color(0, 102, 102));
            String title = "Распределение заказов по месяцам";
            g2d.drawString(title, width / 2 - g2d.getFontMetrics().stringWidth(title) / 2, 30);

            if (monthlyStats.isEmpty()) {
                g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
                g2d.setColor(Color.RED);
                g2d.drawString("Нет данных для отображения", width / 2 - 80, height / 2);
                return;
            }

            // Сортируем месяцы
            List<String> sortedMonths = new ArrayList<>(monthlyStats.keySet());
            sortedMonths.sort(String::compareTo);

            // Находим максимальное значение для масштабирования
            int maxCount = monthlyStats.values().stream().max(Integer::compare).orElse(1);

            // Параметры для столбцов
            int barWidth = Math.max(40, (width - 100) / monthlyStats.size() - 10);
            int startX = 80;
            int baseY = height - 100;
            int chartHeight = height - 200;

            // Рисуем столбцы
            int x = startX;
            for (String month : sortedMonths) {
                int count = monthlyStats.get(month);

                // Высота столбца
                int barHeight = (int) ((count / (double) maxCount) * chartHeight);

                // Цвет столбца
                g2d.setColor(new Color(0, 102, 102));
                g2d.fillRect(x, baseY - barHeight, barWidth, barHeight);

                // Рамка столбца
                g2d.setColor(Color.BLACK);
                g2d.drawRect(x, baseY - barHeight, barWidth, barHeight);

                // Название месяца
                g2d.setFont(new Font("Dialog", Font.PLAIN, 10));
                String displayName = month.substring(5) + "/" + month.substring(0, 4); // "03/2024"
                int textWidth = g2d.getFontMetrics().stringWidth(displayName);
                g2d.drawString(displayName, x + barWidth / 2 - textWidth / 2, baseY + 15);

                // Количество
                g2d.setFont(new Font("Dialog", Font.BOLD, 10));
                String countText = String.valueOf(count);
                int countWidth = g2d.getFontMetrics().stringWidth(countText);
                g2d.drawString(countText, x + barWidth / 2 - countWidth / 2, baseY - barHeight - 5);

                x += barWidth + 15;
            }

            // Ось Y
            g2d.setColor(Color.BLACK);
            g2d.drawLine(60, baseY, 60, 80);
            g2d.drawLine(60, baseY, width - 20, baseY);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(700, 500);
        }
    }

    class AllOrdersClientChartPanel extends JPanel {

        private Map<String, Integer> clientStats;
        private int totalOrders;

        public AllOrdersClientChartPanel(Map<String, Integer> clientStats, int totalOrders) {
            this.clientStats = clientStats;
            this.totalOrders = totalOrders;
            setBackground(Color.WHITE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            int width = getWidth();
            int height = getHeight();

            // Заголовок
            g2d.setFont(new Font("Dialog", Font.BOLD, 18));
            g2d.setColor(new Color(148, 0, 211));
            String title = "Топ клиентов по количеству заказов";
            g2d.drawString(title, width / 2 - g2d.getFontMetrics().stringWidth(title) / 2, 30);

            if (clientStats.isEmpty()) {
                g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
                g2d.setColor(Color.RED);
                g2d.drawString("Нет данных для отображения", width / 2 - 80, height / 2);
                return;
            }

            // Сортируем клиентов по количеству заказов (топ 10)
            List<Map.Entry<String, Integer>> topClients = clientStats.entrySet()
                    .stream()
                    .sorted((e1, e2) -> e2.getValue().compareTo(e1.getValue()))
                    .limit(10)
                    .collect(Collectors.toList());

            // Находим максимальное значение для масштабирования
            int maxCount = topClients.stream()
                    .mapToInt(Map.Entry::getValue)
                    .max()
                    .orElse(1);

            // Параметры для столбцов
            int barWidth = Math.max(30, (width - 100) / topClients.size() - 10);
            int startX = 80;
            int baseY = height - 100;
            int chartHeight = height - 200;

            // Рисуем столбцы
            int x = startX;
            for (int i = 0; i < topClients.size(); i++) {
                Map.Entry<String, Integer> entry = topClients.get(i);
                String client = entry.getKey();
                int count = entry.getValue();

                // Высота столбца
                int barHeight = (int) ((count / (double) maxCount) * chartHeight);

                // Цвет столбца
                g2d.setColor(new Color(148, 0, 211, 150 + i * 10));
                g2d.fillRect(x, baseY - barHeight, barWidth, barHeight);

                // Рамка столбца
                g2d.setColor(Color.BLACK);
                g2d.drawRect(x, baseY - barHeight, barWidth, barHeight);

                // Имя клиента (сокращаем если длинное)
                g2d.setFont(new Font("Dialog", Font.PLAIN, 9));
                String displayName = client.length() > 12 ? client.substring(0, 12) + "..." : client;
                int textWidth = g2d.getFontMetrics().stringWidth(displayName);
                g2d.drawString(displayName, x + barWidth / 2 - textWidth / 2, baseY + 15);

                // Количество заказов
                g2d.setFont(new Font("Dialog", Font.BOLD, 10));
                String countText = String.valueOf(count);
                int countWidth = g2d.getFontMetrics().stringWidth(countText);
                g2d.drawString(countText, x + barWidth / 2 - countWidth / 2, baseY - barHeight - 5);

                x += barWidth + 15;
            }

            // Ось Y
            g2d.setColor(Color.BLACK);
            g2d.drawLine(60, baseY, 60, 80);
            g2d.drawLine(60, baseY, width - 20, baseY);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(700, 500);
        }
    }

    private int getMonthNumber(String monthName) {
        String[] months = {"Январь", "Февраль", "Март", "Апрель", "Май", "Июнь",
            "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"};
        for (int i = 0; i < months.length; i++) {
            if (months[i].equals(monthName)) {
                return i + 1;
            }
        }
        return 1; // По умолчанию январь
    }

    private void buildFabricSalesChart(int month, int year) {
        try {
            // Формируем URL с параметрами для продаж ткани
            String urlString = "http://localhost:8080/atelie/ProdazhatkaniZaMesiac"
                    + "?month=" + month + "&year=" + year;

            System.out.println("=== ОТПРАВКА ЗАПРОСА ДЛЯ ТКАНИ ===");
            System.out.println("URL: " + urlString);

            // Создаем соединение
            URL url = new URL(urlString);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setRequestMethod("POST");
            connection.setRequestProperty("Accept", "application/json");
            connection.setConnectTimeout(10000);
            connection.setReadTimeout(10000);

            // Получаем ответ
            int responseCode = connection.getResponseCode();
            System.out.println("Код ответа для ткани: " + responseCode);

            if (responseCode == HttpURLConnection.HTTP_OK) {
                BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream(), "UTF-8"));
                String inputLine;
                StringBuilder response = new StringBuilder();

                while ((inputLine = in.readLine()) != null) {
                    response.append(inputLine);
                }
                in.close();

                System.out.println("Полный ответ для ткани: " + response.toString());

                // Парсим JSON ответ
                JSONArray jsonArray = new JSONArray(response.toString());
                System.out.println("Количество элементов в JSON для ткани: " + jsonArray.length());

                // Обрабатываем данные для графика ткани
                processFabricDataForChart(jsonArray, month, year);

            } else {
                System.err.println("HTTP ошибка для ткани: " + responseCode);
            }

        } catch (Exception e) {
            System.err.println("Общая ошибка для ткани:");
            e.printStackTrace();
        }
    }

    private void processFabricDataForChart(JSONArray data, int month, int year) {
        // Если данных нет
        if (data.length() == 0 || (data.length() == 1 && data.getString(0).contains("не найдены"))) {
            showNoFabricDataMessage(month, year);
            return;
        }

        // Собираем статистику по тканям
        Map<String, Double> fabricSales = new HashMap<>();
        Map<String, Integer> fabricCount = new HashMap<>();

        System.out.println("Начало обработки ткани " + data.length() + " элементов");

        for (int i = 0; i < data.length(); i++) {
            String item = data.getString(i);
            System.out.println("Обработка элемента ткани " + i + ": " + item);

            // Парсим строку вида: "Ткань: Шелк, Количество: 2 рулонов, Цена за рулон: 1500,00, Сумма: 3000,00"
            if (item.startsWith("Ткань:")) {
                parseFabricSalesItem(item, fabricSales, fabricCount);
            }
        }

        // Проверяем, есть ли данные после парсинга
        System.out.println("Обработка ткани завершена. Найдено тканей: " + fabricSales.size());

        if (fabricSales.isEmpty()) {
            showNoFabricDataMessage(month, year);
            return;
        }

        // Создаем и отображаем график для ткани
        createAndShowFabricChart(fabricSales, fabricCount, month, year);
    }

    private void parseFabricSalesItem(String item, Map<String, Double> fabricSales, Map<String, Integer> fabricCount) {
        try {
            System.out.println("Парсинг ткани: " + item);

            // Упрощенный и надежный парсинг
            String[] parts = item.split(",");
            if (parts.length >= 4) {
                // Извлекаем название ткани
                String fabricName = parts[0].replace("Ткань:", "").trim();

                // Извлекаем количество
                String countStr = parts[1].replace("Количество:", "").replaceAll("[^\\d]", "").trim();
                int count = countStr.isEmpty() ? 0 : Integer.parseInt(countStr);

                // Извлекаем сумму - ищем часть с "Сумма:"
                double total = 0.0;
                for (String part : parts) {
                    if (part.contains("Сумма:")) {
                        String totalStr = part.replace("Сумма:", "").trim();
                        total = parseNumber(totalStr);
                        break;
                    }
                }

                // Если сумма не найдена, ищем часть с "Сумма продаж:" или вычисляем из цены и количества
                if (total == 0.0) {
                    // Пытаемся найти цену за рулон
                    for (String part : parts) {
                        if (part.contains("Цена за рулон:")) {
                            String priceStr = part.replace("Цена за рулон:", "").trim();
                            double price = parseNumber(priceStr);
                            total = price * count;
                            break;
                        }
                    }
                }

                double currentTotal = fabricSales.getOrDefault(fabricName, 0.0);
                int currentCount = fabricCount.getOrDefault(fabricName, 0);

                fabricSales.put(fabricName, currentTotal + total);
                fabricCount.put(fabricName, currentCount + count);

                System.out.println("Успешно обработана ткань: " + fabricName
                        + ", Количество: " + count
                        + ", Сумма: " + total
                        + ", Общая сумма: " + (currentTotal + total));
            }
        } catch (Exception e) {
            System.err.println("Ошибка парсинга данных ткани: " + item);
            e.printStackTrace();
        }
    }

    private double parseNumber(String numberStr) {
        try {
            if (numberStr == null || numberStr.trim().isEmpty()) {
                return 0.0;
            }

            // Убираем все нецифровые символы кроме точки, запятой и минуса
            String cleaned = numberStr.replaceAll("[^\\d,\\.\\-]", "").trim();

            // Если строка пустая после очистки
            if (cleaned.isEmpty()) {
                return 0.0;
            }

            // Обрабатываем отрицательные числа
            boolean isNegative = cleaned.startsWith("-");
            if (isNegative) {
                cleaned = cleaned.substring(1);
            }

            // Если есть и точка и запятая, определяем какой символ является разделителем тысяч
            if (cleaned.contains(",") && cleaned.contains(".")) {
                int lastComma = cleaned.lastIndexOf(",");
                int lastDot = cleaned.lastIndexOf(".");
                if (lastComma > lastDot) {
                    // Запятая - десятичный разделитель, точка - разделитель тысяч
                    cleaned = cleaned.replace(".", "").replace(',', '.');
                } else {
                    // Точка - десятичный разделитель, запятая - разделитель тысяч
                    cleaned = cleaned.replace(",", "");
                }
            } else if (cleaned.contains(",")) {
                // Если есть только запятые, проверяем является ли она десятичным разделителем
                if (cleaned.lastIndexOf(",") == cleaned.length() - 3) {
                    // Запятая на позиции -3 от конца (формат 123,45) - это десятичный разделитель
                    cleaned = cleaned.replace(',', '.');
                } else {
                    // Запятая - разделитель тысяч
                    cleaned = cleaned.replace(",", "");
                }
            }

            double result = Double.parseDouble(cleaned);
            return isNegative ? -result : result;

        } catch (Exception e) {
            System.err.println("Ошибка парсинга числа: '" + numberStr + "'");
            e.printStackTrace();
            return 0.0;
        }
    }

    private void createAndShowFabricChart(Map<String, Double> sales, Map<String, Integer> counts, int month, int year) {
        // Очищаем панель перед отрисовкой нового графика
        jPanel9.removeAll();
        jPanel9.setLayout(new BorderLayout());

        // Создаем панель для графика ткани
        JPanel chartPanel = new FabricChartPanel(sales, counts, month, year);
        jPanel9.add(chartPanel, BorderLayout.CENTER);

        // Обновляем интерфейс
        jPanel9.revalidate();
        jPanel9.repaint();
    }

    private void showNoFabricDataMessage(int month, int year) {
        jPanel9.removeAll();
        jPanel9.setLayout(new BorderLayout());

        String[] months = {"Январь", "Февраль", "Март", "Апрель", "Май", "Июнь",
            "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"};
        String monthName = months[month - 1];

        JLabel noDataLabel = new JLabel("Продажи ткани за " + monthName + " " + year + " года не найдены", JLabel.CENTER);
        noDataLabel.setFont(new Font("Dialog", Font.BOLD, 16));
        noDataLabel.setForeground(Color.RED);

        jPanel9.add(noDataLabel, BorderLayout.CENTER);
        jPanel9.revalidate();
        jPanel9.repaint();
    }

    class FabricChartPanel extends JPanel {

        private Map<String, Double> sales;
        private Map<String, Integer> counts;
        private int month;
        private int year;

        public FabricChartPanel(Map<String, Double> sales, Map<String, Integer> counts, int month, int year) {
            this.sales = sales;
            this.counts = counts;
            this.month = month;
            this.year = year;
            setBackground(Color.WHITE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            int width = getWidth();
            int height = getHeight();

            // Заголовок
            String[] months = {"Январь", "Февраль", "Март", "Апрель", "Май", "Июнь",
                "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"};
            String monthName = months[month - 1];

            g2d.setFont(new Font("Dialog", Font.BOLD, 18));
            g2d.setColor(new Color(0, 102, 102)); // Другой цвет для ткани
            String title = "Продажи ткани за " + monthName + " " + year + " года";
            g2d.drawString(title, width / 2 - g2d.getFontMetrics().stringWidth(title) / 2, 30);

            if (sales.isEmpty()) {
                g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
                g2d.setColor(Color.RED);
                g2d.drawString("Нет данных для отображения", width / 2 - 80, height / 2);
                return;
            }

            // Находим максимальное значение для масштабирования
            double maxSales = sales.values().stream().max(Double::compare).orElse(1.0);

            // Параметры для столбцов
            int barWidth = Math.max(40, (width - 100) / sales.size() - 20);
            int startX = 50;
            int baseY = height - 100;
            int chartHeight = height - 150;

            // Цвета для столбцов ткани (зеленые оттенки)
            Color[] colors = {
                new Color(0, 102, 102), new Color(0, 128, 128),
                new Color(0, 150, 150), new Color(0, 180, 180),
                new Color(0, 200, 200), new Color(0, 220, 220)
            };

            // Рисуем столбцы
            int colorIndex = 0;
            int x = startX;

            for (Map.Entry<String, Double> entry : sales.entrySet()) {
                String fabric = entry.getKey();
                double salesAmount = entry.getValue();
                int count = counts.get(fabric);

                // Высота столбца
                int barHeight = (int) ((salesAmount / maxSales) * chartHeight);

                // Рисуем столбец
                g2d.setColor(colors[colorIndex % colors.length]);
                g2d.fillRect(x, baseY - barHeight, barWidth, barHeight);

                // Рамка столбца
                g2d.setColor(Color.BLACK);
                g2d.drawRect(x, baseY - barHeight, barWidth, barHeight);

                // Название ткани (сокращаем если длинное)
                String displayName = fabric.length() > 10 ? fabric.substring(0, 10) + "..." : fabric;
                g2d.setFont(new Font("Dialog", Font.PLAIN, 10));
                int textWidth = g2d.getFontMetrics().stringWidth(displayName);
                g2d.drawString(displayName, x + barWidth / 2 - textWidth / 2, baseY + 15);

                // Сумма продаж
                g2d.setFont(new Font("Dialog", Font.BOLD, 10));
                String salesText = String.format("%.0f руб.", salesAmount);
                int salesWidth = g2d.getFontMetrics().stringWidth(salesText);
                g2d.drawString(salesText, x + barWidth / 2 - salesWidth / 2, baseY - barHeight - 5);

                // Количество рулонов
                g2d.setFont(new Font("Dialog", Font.PLAIN, 9));
                String countText = "Рулоны: " + count;
                int countWidth = g2d.getFontMetrics().stringWidth(countText);
                g2d.drawString(countText, x + barWidth / 2 - countWidth / 2, baseY - barHeight - 20);

                x += barWidth + 20;
                colorIndex++;
            }

            // Ось Y
            g2d.setColor(Color.BLACK);
            g2d.drawLine(40, baseY, 40, 50);
            g2d.drawLine(40, baseY, width - 20, baseY);

            // Разметка оси Y
            g2d.setFont(new Font("Dialog", Font.PLAIN, 10));
            for (int i = 0; i <= 5; i++) {
                int y = baseY - (i * chartHeight / 5);
                String value = String.format("%.0f", maxSales * i / 5);
                g2d.drawString(value, 10, y + 5);
                g2d.drawLine(35, y, 40, y);
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(760, 400);
        }
    }

    private void buildSalesChart(int month, int year) {
        try {
            // Формируем URL с параметрами
            String urlString = "http://localhost:8080/atelie/ProdazhafurnituryZaMesiac"
                    + "?month=" + month + "&year=" + year;

            System.out.println("=== ОТПРАВКА ЗАПРОСА ===");
            System.out.println("URL: " + urlString);

            // Создаем соединение
            URL url = new URL(urlString);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setRequestMethod("POST");
            connection.setRequestProperty("Accept", "application/json");
            connection.setConnectTimeout(10000);
            connection.setReadTimeout(10000);

            // Получаем ответ
            int responseCode = connection.getResponseCode();
            System.out.println("Код ответа: " + responseCode);

            if (responseCode == HttpURLConnection.HTTP_OK) {
                BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream(), "UTF-8"));
                String inputLine;
                StringBuilder response = new StringBuilder();

                while ((inputLine = in.readLine()) != null) {
                    response.append(inputLine);
                }
                in.close();

                System.out.println("Полный ответ: " + response.toString());

                // Парсим JSON ответ
                JSONArray jsonArray = new JSONArray(response.toString());
                System.out.println("Количество элементов в JSON: " + jsonArray.length());

                // Выводим каждый элемент для отладки
                for (int i = 0; i < jsonArray.length(); i++) {
                    System.out.println("Элемент " + i + ": " + jsonArray.getString(i));
                }

                // Обрабатываем данные для графика
                processDataForChart(jsonArray, month, year);

            } else {
                System.err.println("HTTP ошибка: " + responseCode);
                JOptionPane.showMessageDialog(this, "Ошибка при получении данных с сервера: " + responseCode,
                        "Ошибка", JOptionPane.ERROR_MESSAGE);
            }

        } catch (Exception e) {
            System.err.println("Общая ошибка:");
            e.printStackTrace();
            JOptionPane.showMessageDialog(this, "Ошибка при подключении к серверу: " + e.getMessage(),
                    "Ошибка", JOptionPane.ERROR_MESSAGE);
        }
    }

    private void processDataForChart(JSONArray data, int month, int year) {
        // Если данных нет
        if (data.length() == 0 || (data.length() == 1 && data.getString(0).contains("не найдены"))) {
            showNoDataMessage(month, year);
            return;
        }

        // Собираем статистику по товарам
        Map<String, Double> productSales = new HashMap<>();
        Map<String, Integer> productCount = new HashMap<>();

        System.out.println("Начало обработки " + data.length() + " элементов");

        for (int i = 0; i < data.length(); i++) {
            String item = data.getString(i);
            System.out.println("Обработка элемента " + i + ": " + item);

            // Парсим строку вида: "Мебель: Бретель, Количество: 3, Цена: 180,00, Сумма: 540,00"
            if (item.startsWith("Мебель:")) {
                parseSalesItemSimple(item, productSales, productCount);
            }
        }

        // Проверяем, есть ли данные после парсинга
        System.out.println("Обработка завершена. Найдено товаров: " + productSales.size());

        if (productSales.isEmpty()) {
            showNoDataMessage(month, year);
            return;
        }

        // Выводим отладочную информацию
        System.out.println("Успешно обработано товаров: " + productSales.size());
        for (Map.Entry<String, Double> entry : productSales.entrySet()) {
            System.out.println("Товар: " + entry.getKey() + ", Сумма: " + entry.getValue() + ", Количество: " + productCount.get(entry.getKey()));
        }

        // Создаем и отображаем график
        createAndShowChart(productSales, productCount, month, year);
    }

// Замените метод parseSalesItemSimple на этот исправленный вариант:
    private void parseSalesItemSimple(String item, Map<String, Double> productSales, Map<String, Integer> productCount) {
        try {
            System.out.println("Парсинг фурнитуры: " + item);

            // Упрощенный и надежный парсинг
            String[] parts = item.split(",");
            if (parts.length >= 4) {
                // Извлекаем название товара
                String productName = parts[0].replace("Мебель:", "").trim();

                // Извлекаем количество
                String countStr = parts[1].replace("Количество:", "").replaceAll("[^\\d]", "").trim();
                int count = countStr.isEmpty() ? 0 : Integer.parseInt(countStr);

                // Извлекаем сумму - ищем часть с "Сумма:"
                double total = 0.0;
                for (String part : parts) {
                    if (part.contains("Сумма:")) {
                        String totalStr = part.replace("Сумма:", "").trim();
                        total = parseNumber(totalStr);
                        break;
                    }
                }

                // Если сумма не найдена, ищем часть с ценой
                if (total == 0.0) {
                    for (String part : parts) {
                        if (part.contains("Цена:")) {
                            String priceStr = part.replace("Цена:", "").trim();
                            double price = parseNumber(priceStr);
                            total = price * count;
                            break;
                        }
                    }
                }

                double currentTotal = productSales.getOrDefault(productName, 0.0);
                int currentCount = productCount.getOrDefault(productName, 0);

                productSales.put(productName, currentTotal + total);
                productCount.put(productName, currentCount + count);

                System.out.println("Успешно обработано: " + productName
                        + ", Количество: " + count
                        + ", Сумма: " + total
                        + ", Общая сумма: " + (currentTotal + total));
            }
        } catch (Exception e) {
            System.err.println("Ошибка парсинга данных: " + item);
            e.printStackTrace();
        }
    }

    private void tryAlternativeParsing(String item, Map<String, Double> productSales, Map<String, Integer> productCount) {
        try {
            // Используем регулярные выражения для парсинга
            java.util.regex.Pattern pattern = java.util.regex.Pattern.compile(
                    "Мебель:\\s*([^,]+),\\s*Количество:\\s*(\\d+),\\s*[^,]*,\\s*Сумма:\\s*([\\d,]+)");
            java.util.regex.Matcher matcher = pattern.matcher(item);

            if (matcher.find()) {
                String productName = matcher.group(1).trim();
                int count = Integer.parseInt(matcher.group(2).trim());
                String totalStr = matcher.group(3).replace(',', '.').trim();
                double total = Double.parseDouble(totalStr);

                productSales.put(productName, productSales.getOrDefault(productName, 0.0) + total);
                productCount.put(productName, productCount.getOrDefault(productName, 0) + count);

                System.out.println("Альтернативный парсинг успешен: " + productName);
            }
        } catch (Exception e2) {
            System.err.println("Альтернативный парсинг также не удался: " + item);
        }
    }

    // Метод для создания и отображения графика
    private void createAndShowChart(Map<String, Double> sales, Map<String, Integer> counts, int month, int year) {
        // Очищаем панель перед отрисовкой нового графика
        jPanel7.removeAll();
        jPanel7.setLayout(new BorderLayout());

        // Создаем панель для графика
        JPanel chartPanel = new SalesChartPanel(sales, counts, month, year);
        jPanel7.add(chartPanel, BorderLayout.CENTER);

        // Обновляем интерфейс
        jPanel7.revalidate();
        jPanel7.repaint();
    }

    // Метод для отображения сообщения об отсутствии данных
    private void showNoDataMessage(int month, int year) {
        jPanel7.removeAll();
        jPanel7.setLayout(new BorderLayout());

        String[] months = {"Январь", "Февраль", "Март", "Апрель", "Май", "Июнь",
            "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"};
        String monthName = months[month - 1];

        JLabel noDataLabel = new JLabel("Продажи за " + monthName + " " + year + " года не найдены", JLabel.CENTER);
        noDataLabel.setFont(new Font("Dialog", Font.BOLD, 16));
        noDataLabel.setForeground(Color.RED);

        jPanel7.add(noDataLabel, BorderLayout.CENTER);
        jPanel7.revalidate();
        jPanel7.repaint();
    }

    // Внутренний класс для отрисовки графика
    class SalesChartPanel extends JPanel {

        private Map<String, Double> sales;
        private Map<String, Integer> counts;
        private int month;
        private int year;

        public SalesChartPanel(Map<String, Double> sales, Map<String, Integer> counts, int month, int year) {
            this.sales = sales;
            this.counts = counts;
            this.month = month;
            this.year = year;
            setBackground(Color.WHITE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            int width = getWidth();
            int height = getHeight();

            // Заголовок
            String[] months = {"Январь", "Февраль", "Март", "Апрель", "Май", "Июнь",
                "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"};
            String monthName = months[month - 1];

            g2d.setFont(new Font("Dialog", Font.BOLD, 18));
            g2d.setColor(new Color(163, 27, 24));
            String title = "Продажи за " + monthName + " " + year + " года";
            g2d.drawString(title, width / 2 - g2d.getFontMetrics().stringWidth(title) / 2, 30);

            if (sales.isEmpty()) {
                g2d.setFont(new Font("Dialog", Font.PLAIN, 14));
                g2d.setColor(Color.RED);
                g2d.drawString("Нет данных для отображения", width / 2 - 80, height / 2);
                return;
            }

            // Находим максимальное значение для масштабирования
            double maxSales = sales.values().stream().max(Double::compare).orElse(1.0);

            // Параметры для столбцов
            int barWidth = Math.max(40, (width - 100) / sales.size() - 20);
            int startX = 50;
            int baseY = height - 100;
            int chartHeight = height - 150;

            // Цвета для столбцов
            Color[] colors = {
                new Color(163, 27, 24), new Color(30, 144, 255),
                new Color(50, 205, 50), new Color(255, 165, 0),
                new Color(148, 0, 211), new Color(255, 69, 0)
            };

            // Рисуем столбцы
            int colorIndex = 0;
            int x = startX;

            for (Map.Entry<String, Double> entry : sales.entrySet()) {
                String product = entry.getKey();
                double salesAmount = entry.getValue();
                int count = counts.get(product);

                // Высота столбца
                int barHeight = (int) ((salesAmount / maxSales) * chartHeight);

                // Рисуем столбец
                g2d.setColor(colors[colorIndex % colors.length]);
                g2d.fillRect(x, baseY - barHeight, barWidth, barHeight);

                // Рамка столбца
                g2d.setColor(Color.BLACK);
                g2d.drawRect(x, baseY - barHeight, barWidth, barHeight);

                // Название товара (сокращаем если длинное)
                String displayName = product.length() > 10 ? product.substring(0, 10) + "..." : product;
                g2d.setFont(new Font("Dialog", Font.PLAIN, 10));
                int textWidth = g2d.getFontMetrics().stringWidth(displayName);
                g2d.drawString(displayName, x + barWidth / 2 - textWidth / 2, baseY + 15);

                // Сумма продаж
                g2d.setFont(new Font("Dialog", Font.BOLD, 10));
                String salesText = String.format("%.0f руб.", salesAmount);
                int salesWidth = g2d.getFontMetrics().stringWidth(salesText);
                g2d.drawString(salesText, x + barWidth / 2 - salesWidth / 2, baseY - barHeight - 5);

                // Количество
                g2d.setFont(new Font("Dialog", Font.PLAIN, 9));
                String countText = "Кол-во: " + count;
                int countWidth = g2d.getFontMetrics().stringWidth(countText);
                g2d.drawString(countText, x + barWidth / 2 - countWidth / 2, baseY - barHeight - 20);

                x += barWidth + 20;
                colorIndex++;
            }

            // Ось Y
            g2d.setColor(Color.BLACK);
            g2d.drawLine(40, baseY, 40, 50);
            g2d.drawLine(40, baseY, width - 20, baseY);

            // Разметка оси Y
            g2d.setFont(new Font("Dialog", Font.PLAIN, 10));
            for (int i = 0; i <= 5; i++) {
                int y = baseY - (i * chartHeight / 5);
                String value = String.format("%.0f", maxSales * i / 5);
                g2d.drawString(value, 10, y + 5);
                g2d.drawLine(35, y, 40, y);
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(760, 400);
        }
    }

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        // Получаем выбранный месяц и год
        String selectedMonth = (String) jComboBox1.getSelectedItem();
        String yearText = jTextField1.getText().trim();

        // Проверяем, что год введен
        if (yearText.isEmpty()) {
            JOptionPane.showMessageDialog(this, "Пожалуйста, введите год", "Ошибка", JOptionPane.ERROR_MESSAGE);
            return;
        }

        try {
            int year = Integer.parseInt(yearText);
            int monthNumber = getMonthNumber(selectedMonth);

            // Вызываем метод для получения данных и построения графиков
            buildSalesChart(monthNumber, year);        // График мебели в jPanel7
            buildFabricSalesChart(monthNumber, year);  // График ткани в jPanel9

        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(this, "Пожалуйста, введите корректный год", "Ошибка", JOptionPane.ERROR_MESSAGE);
        }


    }//GEN-LAST:event_jButton1ActionPerformed

    private void jComboBox1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jComboBox1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jComboBox1ActionPerformed

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
        loadSalesForPeriod();
    }//GEN-LAST:event_jButton2ActionPerformed

    private void jFormattedTextField6ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jFormattedTextField6ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jFormattedTextField6ActionPerformed

    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton3ActionPerformed
        loadOrdersForMonth();

    }//GEN-LAST:event_jButton3ActionPerformed

    private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton4ActionPerformed
        loadOrdersForPeriod();
    }//GEN-LAST:event_jButton4ActionPerformed

    private void jButton5ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton5ActionPerformed
        loadAllOrders();

    }//GEN-LAST:event_jButton5ActionPerformed

    private void jTextField1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextField1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextField1ActionPerformed

    private void jTextField2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextField2ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextField2ActionPerformed

    private void jComboBox2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jComboBox2ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jComboBox2ActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(dashbord1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(dashbord1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(dashbord1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(dashbord1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new dashbord1().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton10;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton4;
    private javax.swing.JButton jButton5;
    private javax.swing.JButton jButton6;
    private javax.swing.JButton jButton7;
    private javax.swing.JButton jButton8;
    private javax.swing.JButton jButton9;
    private javax.swing.JComboBox<String> jComboBox1;
    private javax.swing.JComboBox<String> jComboBox2;
    private javax.swing.JFormattedTextField jFormattedTextField3;
    private javax.swing.JFormattedTextField jFormattedTextField4;
    private javax.swing.JFormattedTextField jFormattedTextField5;
    private javax.swing.JFormattedTextField jFormattedTextField6;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel15;
    private javax.swing.JPanel jPanel16;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JPanel jPanel8;
    private javax.swing.JPanel jPanel9;
    private javax.swing.JTabbedPane jTabbedPane1;
    private javax.swing.JTextField jTextField1;
    private javax.swing.JTextField jTextField2;
    // End of variables declaration//GEN-END:variables
}
